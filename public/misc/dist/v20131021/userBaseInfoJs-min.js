var country=[{continent:"often",country:["全部","中国","美国","加拿大","日本","韩国","印度","英国","德国","法国","澳大利亚"]},{continent:"asia",country:["阿富汗","格鲁吉亚","老挝","黎巴嫩","阿曼","巴基斯坦","巴勒斯坦","斯里兰卡","苏丹","中国","菲律宾","卡塔尔","马来西亚","叙利亚","塔吉克斯坦","鞑靼斯坦","泰国","阿塞拜疆","巴林","孟加拉国","塞浦路斯","达吉斯坦","印度","印度尼西亚","伊朗","伊拉克","马尔代夫","不丹","东帝汶","以色列","日本","蒙古国","土库曼斯坦","阿联酋","约旦","哈萨克斯坦","缅甸","尼泊尔","沙特阿拉伯","锡金","新加坡","乌兹别克斯坦","越南","柬埔寨","朝鲜","韩国","科威特","吉尔吉斯斯坦","也门"]},{continent:"europe",country:["阿布哈兹","阿迪格","阿扎尔","阿尔巴尼亚","车臣","德国","希腊","格陵兰岛","拉脱维亚","莱索托","列支敦士登","挪威","西班牙","瑞典","瑞士","阿尔泰共和国","安道尔","楚瓦什","立陶宛","卢森堡","马其顿","波兰","葡萄牙","波黑","亚美尼亚","奥地利","克罗地亚","捷克","匈牙利","冰岛","印古什","罗马尼亚","俄罗斯","土耳其","马耳他","白俄罗斯","比利时","丹麦","爱尔兰","意大利","摩尔多瓦","摩纳哥","黑山","圣马力诺","乌克兰","波黑","英格兰","爱沙尼亚","荷兰","塞尔维亚","英国","梵蒂冈","保加利亚","芬兰","法国","科索沃","斯洛伐克","斯洛文尼亚","南奥塞梯","威尔士"]},{continent:"africa",country:["阿尔及利亚","佛得角","中非","乍得","加纳","利比里亚","利比亚","斯威士兰","安哥拉","科摩罗","刚果（金）","刚果（布）","几内亚比绍","几内亚","马达加斯加","马拉维","坦桑尼亚","多戈","科特迪瓦","毛里塔尼亚","毛里求斯","卢旺达","突尼斯","马里","贝宁","吉布提","埃及","摩洛哥","圣多美和普林西比","乌干达","博茨瓦纳","赤道几内亚","厄立特里亚","埃塞俄比亚","肯尼亚","莫桑比克","纳米比亚","塞内加尔","塞舌尔","塞拉利昂","布基纳法索","布隆迪","喀麦隆","加蓬","冈比亚","尼日尔","尼日利亚","索马里","索马里兰","南非","西撒哈拉","赞比亚","津巴布韦"]},{continent:"america",country:["加拿大","开曼群岛","智利","格林纳达","巴拿马","巴拉圭","苏里南","安提瓜和巴布达","阿根廷","哥伦比亚","危地马拉","圭亚那","海地","洪都拉斯","秘鲁","波多黎各","巴哈马","哥斯达黎加","古巴","墨西哥","圣基茨和尼维斯","圣卢西亚","特立尼达和多巴哥","巴巴多斯","伯利兹","多米尼克","多米尼加","厄瓜多尔","牙买加","玻利维亚","巴西","萨尔瓦多","美国","乌拉圭","委内瑞拉","尼加拉瓜"]},{continent:"oceania",country:["帕劳","巴布亚新几内亚","库克群岛","澳大利亚","马绍尔群岛","托克劳群岛","汤加","密克罗尼西亚","萨摩亚","图瓦卢","瑙鲁","瓦努阿图","斐济","基里巴斯","新西兰","纽埃","所罗门群岛"]}];!function(a){function b(){a.each(c,function(){this.refresh(!0)})}var c=[],d=/^url\(["']?([^"'\)]*)["']?\);?$/i,e=/\.png$/i,f=!!window.createPopup&&"undefined"==document.documentElement.currentStyle.minWidth;a(window).resize(b),a.Poshytip=function(b,c){this.$elm=a(b),this.opts=a.extend({},a.fn.poshytip.defaults,c),this.$tip=a(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body),this.$arrow=this.$tip.find("div.tip-arrow"),this.$inner=this.$tip.find("div.tip-inner"),this.disabled=!1,this.content=null,this.init()},a.Poshytip.prototype={init:function(){c.push(this);var b=this.$elm.attr("title");if(this.$elm.data("title.poshytip",void 0!==b?b:null).data("poshytip",this),"none"!=this.opts.showOn)switch(this.$elm.bind({"mouseenter.poshytip":a.proxy(this.mouseenter,this),"mouseleave.poshytip":a.proxy(this.mouseleave,this)}),this.opts.showOn){case"hover":"cursor"==this.opts.alignTo&&this.$elm.bind("mousemove.poshytip",a.proxy(this.mousemove,this)),this.opts.allowTipHover&&this.$tip.hover(a.proxy(this.clearTimeouts,this),a.proxy(this.mouseleave,this));break;case"focus":this.$elm.bind({"focus.poshytip":a.proxy(this.showDelayed,this),"blur.poshytip":a.proxy(this.hideDelayed,this)})}},mouseenter:function(){return this.disabled?!0:(this.$elm.attr("title",""),"focus"==this.opts.showOn?!0:void this.showDelayed())},mouseleave:function(a){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===a.relatedTarget||jQuery.contains(this.$tip[0],a.relatedTarget)))return!0;if(!this.$tip.data("active")){var b=this.$elm.data("title.poshytip");null!==b&&this.$elm.attr("title",b)}return"focus"==this.opts.showOn?!0:void this.hideDelayed()},mousemove:function(a){return this.disabled?!0:(this.eventX=a.pageX,this.eventY=a.pageY,void(this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow))))},show:function(){this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.content&&(this.display(),this.opts.timeOnScreen&&this.hideDelayed(this.opts.timeOnScreen)))},showDelayed:function(b){this.clearTimeouts(),this.showTimeout=setTimeout(a.proxy(this.show,this),"number"==typeof b?b:this.opts.showTimeout)},hide:function(){!this.disabled&&this.$tip.data("active")&&this.display(!0)},hideDelayed:function(b){this.clearTimeouts(),this.hideTimeout=setTimeout(a.proxy(this.hide,this),"number"==typeof b?b:this.opts.hideTimeout)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1),this.$inner.find("*").poshytip("hide"),this.opts.fade&&this.$tip.css("opacity",this.opacity),this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left",this.asyncAnimating=!1},update:function(a,b){if(!this.disabled){var c=void 0!==a;if(c){if(b||(this.opts.content=a),!this.$tip.data("active"))return}else a=this.opts.content;var d=this,e="function"==typeof a?a.call(this.$elm[0],function(a){d.update(a)}):"[title]"==a?this.$elm.data("title.poshytip"):a;this.content!==e&&(this.$inner.empty().append(e),this.content=e),this.refresh(c)}},refresh:function(b){if(!this.disabled){if(b){if(!this.$tip.data("active"))return;var c={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body),void 0===this.opacity&&(this.opacity=this.$tip.css("opacity"));var g=this.$tip.css("background-image").match(d),h=this.$arrow.css("background-image").match(d);if(g){var i=e.test(g[1]);f&&i?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),g=i=!1):this.$tip.prepend('<table class="tip-table" border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+g[1]+'")').end().find("td").eq(3).append(this.$inner),i&&!a.support.opacity&&(this.opts.fade=!1)}h&&!a.support.opacity&&(f&&e.test(h[1])&&(h=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1);var j=this.$tip.find("> table.tip-table");if(f){this.$tip[0].style.width="",j.width("auto").find("td").eq(3).width("auto");var k=this.$tip.width(),l=parseInt(this.$tip.css("min-width")),m=parseInt(this.$tip.css("max-width"));!isNaN(l)&&l>k?k=l:!isNaN(m)&&k>m&&(k=m),this.$tip.add(j).width(k).eq(0).find("td").eq(3).width("100%")}else j[0]&&j.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%");if(this.tipOuterW=this.$tip.outerWidth(),this.tipOuterH=this.$tip.outerHeight(),this.calcPos(),h&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow,this.$arrow.css("visibility","inherit")),b&&this.opts.refreshAniDuration){this.asyncAnimating=!0;var n=this;this.$tip.css(c).animate({left:this.pos.l,top:this.pos.t},this.opts.refreshAniDuration,function(){n.asyncAnimating=!1})}else this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(b){var c=this.$tip.data("active");if(!(c&&!b||!c&&b)){if(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(b&&this.opts.hideAniDuration||!b&&this.opts.showAniDuration)){var d={},e={};if(this.opts.slide&&this.pos.arrow){var f,g;"bottom"==this.pos.arrow||"top"==this.pos.arrow?(f="top",g="bottom"):(f="left",g="right");var h=parseInt(this.$tip.css(f));d[f]=h+(b?0:this.pos.arrow==g?-this.opts.slideOffset:this.opts.slideOffset),e[f]=h+(b?this.pos.arrow==g?this.opts.slideOffset:-this.opts.slideOffset:0)+"px"}this.opts.fade&&(d.opacity=b?this.$tip.css("opacity"):0,e.opacity=b?0:this.opacity),this.$tip.css(d).animate(e,this.opts[b?"hideAniDuration":"showAniDuration"])}if(b?this.$tip.queue(a.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),c){var i=this.$elm.data("title.poshytip");null!==i&&this.$elm.attr("title",i)}this.$tip.data("active",!c)}},disable:function(){this.reset(),this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.reset(),this.$tip.remove(),delete this.$tip,this.content=null,this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip"),c.splice(a.inArray(this,c),1)},clearTimeouts:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},calcPos:function(){var b,c,d,e,f,g,h={l:0,t:0,arrow:""},i=a(window),j={l:i.scrollLeft(),t:i.scrollTop(),w:i.width(),h:i.height()};if("cursor"==this.opts.alignTo)b=c=d=this.eventX,e=f=g=this.eventY;else{var k=this.$elm.offset(),l={l:k.left,t:k.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};b=l.l+("inner-right"!=this.opts.alignX?0:l.w),c=b+Math.floor(l.w/2),d=b+("inner-left"!=this.opts.alignX?l.w:0),e=l.t+("inner-bottom"!=this.opts.alignY?0:l.h),f=e+Math.floor(l.h/2),g=e+("inner-top"!=this.opts.alignY?l.h:0)}switch(this.opts.alignX){case"right":case"inner-left":h.l=d+this.opts.offsetX,this.opts.keepInViewport&&h.l+this.tipOuterW>j.l+j.w&&(h.l=j.l+j.w-this.tipOuterW),("right"==this.opts.alignX||"center"==this.opts.alignY)&&(h.arrow="left");break;case"center":h.l=c-Math.floor(this.tipOuterW/2),this.opts.keepInViewport&&(h.l+this.tipOuterW>j.l+j.w?h.l=j.l+j.w-this.tipOuterW:h.l<j.l&&(h.l=j.l));break;default:h.l=b-this.tipOuterW-this.opts.offsetX,this.opts.keepInViewport&&h.l<j.l&&(h.l=j.l),("left"==this.opts.alignX||"center"==this.opts.alignY)&&(h.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":h.t=g+this.opts.offsetY,h.arrow&&"cursor"!=this.opts.alignTo||(h.arrow="top"),this.opts.keepInViewport&&h.t+this.tipOuterH>j.t+j.h&&(h.t=e-this.tipOuterH-this.opts.offsetY,"top"==h.arrow&&(h.arrow="bottom"));break;case"center":h.t=f-Math.floor(this.tipOuterH/2),this.opts.keepInViewport&&(h.t+this.tipOuterH>j.t+j.h?h.t=j.t+j.h-this.tipOuterH:h.t<j.t&&(h.t=j.t));break;default:h.t=e-this.tipOuterH-this.opts.offsetY,h.arrow&&"cursor"!=this.opts.alignTo||(h.arrow="bottom"),this.opts.keepInViewport&&h.t<j.t&&(h.t=g+this.opts.offsetY,"bottom"==h.arrow&&(h.arrow="top"))}this.pos=h}},a.fn.poshytip=function(b){if("string"==typeof b){var c=arguments,d=b;return Array.prototype.shift.call(c),"destroy"==d&&(this.die?this.die("mouseenter.poshytip").die("focus.poshytip"):a(document).undelegate(this.selector,"mouseenter.poshytip").undelegate(this.selector,"focus.poshytip")),this.each(function(){var b=a(this).data("poshytip");b&&b[d]&&b[d].apply(b,c)})}var e=a.extend({},a.fn.poshytip.defaults,b);if(a("#poshytip-css-"+e.className)[0]||a(['<style id="poshytip-css-',e.className,'" type="text/css">',"div.",e.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",e.className," table.tip-table, div.",e.className," table.tip-table td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;vertical-align:middle;}","div.",e.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",e.bgImageFrameSize,"px;width:",e.bgImageFrameSize,"px;overflow:hidden;}","div.",e.className," td.tip-right{background-position:100% 0;}","div.",e.className," td.tip-bottom{background-position:100% 100%;}","div.",e.className," td.tip-left{background-position:0 100%;}","div.",e.className," div.tip-inner{background-position:-",e.bgImageFrameSize,"px -",e.bgImageFrameSize,"px;}","div.",e.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head"),e.liveEvents&&"none"!=e.showOn){var f,g=a.extend({},e,{liveEvents:!1});switch(e.showOn){case"hover":f=function(){var b=a(this);b.data("poshytip")||b.poshytip(g).poshytip("mouseenter")},this.live?this.live("mouseenter.poshytip",f):a(document).delegate(this.selector,"mouseenter.poshytip",f);break;case"focus":f=function(){var b=a(this);b.data("poshytip")||b.poshytip(g).poshytip("showDelayed")},this.live?this.live("focus.poshytip",f):a(document).delegate(this.selector,"focus.poshytip",f)}return this}return this.each(function(){new a.Poshytip(this,e)})},a.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:!1,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,keepInViewport:!0,allowTipHover:!0,followCursor:!1,fade:!0,slide:!0,slideOffset:8,showAniDuration:300,hideAniDuration:300,refreshAniDuration:200}}(jQuery),define("common/interface",[],function(){var a=!1;return{getApiUrl:function(){var b={};return b=a?{getLoginUrl:ued_conf.root+"json/login.json",toLoginUrl:ued_conf.root+"/json/login.json",toRegisterUrl:ued_conf.root+"/json/reg.json",forgetPwdUrl:ued_conf.root+"/json/forget.json",editPwdUrl:ued_conf.root+"/json/editPwd.json",checkEmailUrl:ued_conf.root+"/json/email.json",captchaUrl:ued_conf.root+"/json/captcha.json",addAttentionUrl:ued_conf.root+"/json/addAttention.json",unAttentionUrl:ued_conf.root+"/json/unAttention.json",commentListUrl:ued_conf.root+"/json/commentList.json",leaveMessageUrl:ued_conf.root+"/json/leaveMessage.json",searchListUrl:ued_conf.root+"/json/expertVOList.json",saveUserInfoUrl:ued_conf.root+"/json/saveUserInfo.json",saveServiceUrl:ued_conf.root+"/json/saveService.json",getOrderUsedUrl:"",saveOrderDateUrl:"",uploadHeadUrl:ued_conf.root+"/json/upload.json",saveEmailUrl:ued_conf.root+"/json/saveEmail.json",savePhoneUrl:ued_conf.root+"/json/savePhone.json",saveModifyPhoneUrl:ued_conf.root+"/json/saveModifyPhone.json",checkPhoneUrl:ued_conf.root+"/json/checkPhone.json",sendPhoneSMSUrl:ued_conf.root+"/json/sendPhoneSMS.json",sendSMSByPhoneUrl:ued_conf.root+"/json/sendPhoneSMSwithoutPara.json",sendSMSByEmail:ued_conf.root+"/json/sendSMSByEmail.json",saveNewPwdUrl:ued_conf.root+"/json/saveNewPwd.json",saveTipsUrl:ued_conf.root+"/json/saveTips.json",saveAppLoginUrl:ued_conf.root+"/json/saveTips.json",saveBookingTipsUrl:ued_conf.root+"/json/saveTips.json",userMegUrl:ued_conf.root+"/user/user-message.shtml",sendMsgUrl:ued_conf.root+"/consult/sendMsg.shtml",getMsgUrl:ued_conf.root+"/json/getMsg.json",getTagsUrl:"",getTradeListUrl:"",getTradeShowSNSUrl:"",shareTradeSNSUrl:"",deleteTradeUrl:"",getMessageListUrl:"",deleteMessageUrl:"",getMessageCountUrl:"",updateMessageUrl:"",getConsultPollUrl:"",getCommentListUrl:"/comment/expertComments",saveCommentUrl:"",saveNewCommentUrl:"",addReplyUrl:"/comment/addReply",cancelTradeUrl:"/user/usertrade/cancel",consultUserUrl:"http://192.168.0.195:9000/host/{0}/{1}",consultExportUrl:"/chat/{0}",consultTradeOnlineUrl:"/user/usertrade/unConsult",getFbDataUrl:ued_conf.root+"/json/getFbData.json",saveFeedbackUrl:ued_conf.root+"/json/saveFeedback.json",saveComplainUrl:"",allExpertUrl:ued_conf.root+"/json/allExpert.json",uploadUrl:ued_conf.root+"",getVideoStatusUrl:"",rejectVideoUrl:"",getTypeTagsUrl:ued_conf.root+"/json/getTags.json",clearCookieUrl:"",expertInfoUrl:"/expert/expertInfo/",sendEmail:"/usersetting/sendEmail",phoneMailSuccess:"/usersetting/phonemailsuccess",moreChatRecordUrl:ued_conf.root+"/json/moreChatRecord.json",beforeBeginCharge:"/chat/begin/{0}",getNewMsgUrl:"",updateMsgUrl:"",getSelfInChatUrl:"",commentReplyUrl:"",getTranslate:"",addGroupByTranslate:"",getGroupMember:"",updateChatMsgUrl:"",getChatUser:ued_conf.root+"json/chatUser.json",getChatByOption:"",inviteFriends:"",addFriend:"",deleteFriend:"",queryChatDetail:"",uploadAvatar:"",uploadGroupBack:"",addGroup:"",inviteJoinGroup:"",queryGroups:"",queryJoinGroups:"",queryGroupById:"",exitGroup:"",deleteGroupMember:"",addDiscussionUrl:ued_conf.root+"json/addDiscussion.json"}:{getLoginUrl:"/login",toLoginUrl:"/login",toThirdLoginUrl:"/user/auth/bindAccountLogin",toRegisterUrl:"/register",toThirdRegisterUrl:"/user/auth/newAccountLogin",toThirdLoginNoAccountUrl:"/user/auth/directLogin",forgetPwdUrl:"/forgetpwd",editPwdUrl:"/resetpwd",checkEmailUrl:"/emailexists",captchaUrl:"/captcha",addAttentionUrl:"",unAttentionUrl:"",commentListUrl:"",leaveMessageUrl:"",searchListUrl:"/expertsearch",saveUserInfoUrl:"/user/userdetail/personalinfo",saveServiceUrl:"/user/userdetail/serviceinfo",getOrderDateUrl:"/expert/record/{0}",getOrderUsedUrl:"/expert/record/used/{0}/{1}",saveOrderDateUrl:"/expert/record",uploadHeadUrl:"/user/uploadavatar",saveEmailUrl:"/user/usersetting/changeEmail",savePhoneUrl:"/user/usersetting/bindMobilePhone",saveModifyPhoneUrl:"/user/usersetting/updateMobilePhone",checkPhoneUrl:"/user/usersetting/phoneNumExists",sendPhoneSMSUrl:"/user/usersetting/sendPhoneVerificationCode",sendSMSByPhoneUrl:"/user/usersetting/sendVerificationCodeByPhone",sendSMSByEmail:"/user/usersetting/sendVerificationCodeByNewPhone",saveNewPwdUrl:"/user/usersetting/changePassword",saveTipsUrl:"/user/usersetting/modifySafetyReminder",saveAppLoginUrl:"/user/usersetting/completeUserInfo",saveBookingTipsUrl:"/user/usersetting/modifyBookingReminder",userMegUrl:"/user/usermessage",sendMsgUrl:"/consult/sendMsg",getMsgUrl:ued_conf.root+"json/getMsg.json",getTagsUrl:"/skilltags/query",getTradeListUrl:"/user/usertrade",getTradeShowSNSUrl:"/user/usertrade/getShareInfo",shareTradeSNSUrl:"/user/usertrade/shareInfo",deleteTradeUrl:"/user/usertrade/delete",getChatRecUrl:"/msg/queryChatMessage",getMessageListUrl:"/msg/query",deleteMessageUrl:"/msg/delete",getMessageCountUrl:"/msg/poll",updateMessageUrl:"/msg/updateread",getConsultPollUrl:"/msg/consultClear",getCommentListUrl:"/comment/list",saveCommentUrl:"/comment/addComment",saveNewCommentUrl:"/comment/saveComment",addReplyUrl:"/comment/addReply",cancelTradeUrl:"/user/usertrade/cancel",consultTradeUserUrl:"/consult/beginReserve",consultExportUrl:"/chat/{0}",consultTradeExportUrl:"/user/usertrade/accepted/{0}",consultTradeOnlineUrl:"/user/usertrade/unConsult",getFbDataUrl:"/feedback/beforeComplain",saveFeedbackUrl:"/feedback/suggestion",saveComplainUrl:"/feedback/complain",allExpertUrl:"/skilltags/tagmore",uploadUrl:"/feedback/uploadproof",getTypeTagsUrl:"/skilltags/change",clearCookieUrl:"/forgetMe",expertInfoUrl:"/expert/expertInfo/{0}",sendEmail:"/user/usersetting/sendEmail",phoneMailSuccess:"/user/usersetting/phonemailsuccess",moreChatRecordUrl:"/chat/chatMsg/chatMsgQuery",beforeBeginCharge:"/chat/begin/{0}",getNewMsgUrl:"/msg/new",getNewChatMsgUrl:"/msg/chatMsgUnReadInfo",updateMsgUrl:"/msg/notice",getSelfInChatUrl:"/chat/whetherInChat/{0}/{1}",getYouInChatUrl:"/chat/whetherOnline/{0}",commentReplyUrl:"/comment/detail/{0}",addFavorite:"/user/addFavorite/{0}",deleteFavorite:"/user/deleteFavorite/{0}",queryFavorite:"/user/favorite/queryFavorite",getTranslateUrl:"/tl/autotl",addGroupByTranslate:"/msg/group/addUserToGroup/{0}/{1}",addMultiCommunicate:"/user/group/createMultiCommunicate",updateMultiCommunicate:"/user/group/updateMultiCommunicateName",getGroupMember:"/msg/group/queryUserUnderGroup/{0}",getGroupMemberByPage:"/msg/group/queryMemberUnderGroup",getTranslatorUrl:"/msg/queryCustomerServices",updateChatMsgUrl:"/chat/cleanChatNum/{0}/{1}",updateGroupMsgUrl:"/chat/cleanGroupChatNum/{0}/{1}",getChatUser:"/msg/queryRelationship",getChatByOption:"/msg/queryChatMessageByCondition",inviteFriends:"/user/at/inviteFriends",addFriend:"/user/at/addFriend",queryFriends:"/user/at/queryFriends",deleteFriend:"/user/at/deleteFriend/{0}/{1}",queryChatDetail:"/msg/queryChatMessageContext",uploadAvatar:"/user/group/uploadavatar",uploadGroupBack:"/user/group/uploadHeadBackGround",addGroup:"/user/group/createOrUpdateGroup",queryGroups:"/user/group/queryCreatedGroups",queryJoinGroups:"/user/group/queryJoinedGroups",queryGroupById:"/user/group/queryGroup/{0}",deleteGroup:"/user/group/deleteGroup/{0}",exitGroup:"/user/group/quitGroup/{0}",addMembers:"/msg/group/appendMemberToGroup",inviteJoinGroup:"/groupmsg/invitmembers",queryTempGroups:"/user/group/queryTempGroups",saveResume:"/resume/personalinfo",deleteGroupMember:"/user/group/removeMember",groupAgreeApply:"/groupmsg/agreeApply",groupAgreeInvite:"/groupmsg/agreeInvit",groupReject:"/groupmsg/reject",addEnResume:"/resume/addTaskForChinese",queryService:"/user/service/queryServices",queryRequire:"/user/require/queryRequires",addService:"/user/service/createOrUpdateService",addRequire:"/user/require/createOrUpdateRequire",deleteService:"/user/service/delete/{0}",deleteRequire:"/user/require/delete/{0}",getGroupDetailList:"/group/memberList",getGroupHomeList:"/groupList",applyJoinGroup:"/groupmsg/apply",requireHomeList:"/require",serviceHomeList:"/services",getDeveloperRequireList:"/user/require/requiresOfTa",getDeveloperServiceList:"/user/service/servicesOfTa",getMsgUnread:"/msg/queryUnread",markUnreadMsg:"/msg/updateread",requireSearch:"/require/search",serviceSearch:"/services/search"}}}}),define("module/cookie",[],function(){return{get:function(a){var b="; "+document.cookie+"; ",c=b.indexOf("; "+a+"=");if(-1!=c){var d=b.substring(c+a.length+3,b.length);return decodeURIComponent(d.substring(0,d.indexOf("; ")))}return null},set:function(a,b,c,d){var e=null,f=null;f=c?"; expires="+c.toGMTString():"",e=a+"="+encodeURIComponent(b)+f+"; path=/",d&&(e+=";domain="+d),document.cookie=e},del:function(a){var b=new Date((new Date).getTime()-1),c=this.get(a);null!=c&&(document.cookie=a+"="+c+";expires="+b.toGMTString()+":path=/")},clearAllCookie:function(){var a=document.cookie.match(/[^ =;]+(?=\=)/g);if(a)for(var b=a.length;b--;)document.cookie=a[b]+"=0;expires="+new Date(0).toUTCString()+":path=/"}}}),define("common/util",["module/cookie"],function(a){var b={};return{setAjax:function(b,c,d,e,f,g){var h=parseInt(a.get("_u_id"))||0,i={type:"POST",dataType:"json",data:JSON.stringify(c),cache:!1,url:b,async:g?!1:!0,success:function(a){a&&a.notLogin&&"true"===a.notLogin?location.href="/login?msg=1&referer="+encodeURIComponent(location.href):a&&a.notCompInfo&&"true"===a.notCompInfo?location.href="/user/thirdaccountsetting?referer="+encodeURIComponent(location.href):d&&d(a)},error:function(a,b){switch(b){case"timeout":break;case"error":0!=a.status&&(e?e():alert("服务器繁忙，请稍后再试！"));break;case"notmodified":break;case"parsererror":e?e():alert("服务器繁忙，请稍后再试！")}}};return h&&(i.headers={currentUid:h}),f&&"GET"===f?(i.type="GET",i.data=c):i.contentType="application/json; charset=utf-8",$.ajax(i)},objectToStr:function(a){var b=this;return"object"==typeof a?$.each(a,function(c,d){a[c]=b.safeHTML(b.objectToStr(d))}):a=b.safeHTML(a),a},isURL:function(a){var b=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,c=new RegExp(b);return c.test(a)},strFormat:function(a,b){if(a&&0!=a.length)for(var c=0;c<a.length;c++)a=a.replace(new RegExp("\\{"+c+"\\}","g"),b[c]);else a="";return a},template:function(a,b,c){var d;if($.browser.msie)d=a;else{d=[];var e,f=a.length;for(e=0;f>e;e++)d.push(a[e]);d=d.join("")}var g=new RegExp("#{([a-z0-9_]+)}","ig");return d=d.replace(g,function(a,d){return 0==b[d]||"0"==b[d]?b[d]:b[d]?b[d]:c?a:""})},tab:function(a,b,c,d){var e=this;$(a).on("click",function(a){var f=$(this),g=f.siblings(),h=f.index();g.removeClass(b),f.addClass(b),c&&e.isNullString(c)&&(g.addClass(c),f.removeClass(c));var i=f.closest(".tab").find(".tab-table"),j=i.eq(h);j.removeClass("hide"),j.siblings(".tab-table").addClass("hide"),d&&d(h),a.preventDefault()})},location:function(){var a,b={},c=null,d=location.search;if(1==arguments.length){if(c=arguments[0],"string"==typeof c){var e=this.location();b=e[c]||""}else if("object"==typeof c)if(d.indexOf("?")>-1){var f=this.location(),g=$.extend(f,c);b=$.param(g)}else b="?"+$.param(c)}else 2==arguments.length?(b[arguments[0]]=arguments[1],b=this.location(b)):(d=d.replace("?",""),d.indexOf("&")>-1?(a=d.split("&"),$.each(a,function(a,c){c.indexOf("=")>-1?(c=c.split("="),b[c[0]]=decodeURIComponent(c[1]+"")):b[c]=""})):d.indexOf("=")>-1?(a=d.split("="),b[a[0]]=a[1]):b[d]="");return b},dateFormat:function(a,b){var c=new Date(a),d={"M+":c.getMonth()+1,"d+":c.getDate(),"h+":c.getHours(),"m+":c.getMinutes(),"s+":c.getSeconds(),"q+":Math.floor((c.getMonth()+3)/3),S:c.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(c.getFullYear()+"").substr(4-RegExp.$1.length)));for(var e in d)new RegExp("("+e+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?d[e]:("00"+d[e]).substr((""+d[e]).length)));return b},getByName:function(a){var b=$('.main input[name="'+a+'"]'),c=$('.main select[name="'+a+'"]'),d=$('.main textarea[name="'+a+'"]');return b.length>0&&("radio"===b.attr("type")||"checkbox"===b.attr("type"))&&(b=$('.main input[name="'+a+'"]:checked')),b.length>0?b:c.length>0?c:d.length>0?d:null},isNullString:function(a){return 0==a.replace(/(^\s*)|(\s*$)/g,"").length},isArray:function(a){return a instanceof Array},getMaskEmail:function(a){if(this.isNullString(a))return a;var b=a.split("@"),c=b[0].length,d=4>c?c:4,e="";e+=b[0].substring(0,c-d);for(var f=0;d>f;f++)e+="*";return e+"@"+b[1]},imgLoadError:function(a){var b=a||$("img");b.each(function(a,b){b.onerror=function(){$(b).prop("src",ued_conf.root+"images/dev-head-default1.png")}})},safeHTML:function(a){return a&&"string"==typeof a&&(a=a.replace(/</gi,"&lt;"),a=a.replace(/>/gi,"&gt;")),a},getAvatar:function(b,c){var d=parseInt(a.get("_u_id"))||0,e=$(".J-login-mark .img-full").prop("src"),f="";if(e.indexOf("assets")>-1)f=e.substring(0,e.indexOf("assets"))+"uploadfile/avatar/"+b+"/avatar_190.jpg";else{var g=e.indexOf("?");f=e.substring(0,g>-1?g:e.length).replace("/"+d+"/","/"+b+"/")}return c&&"online"===ued_conf.mode&&(f=f+"_"+c+"_"+c),f},removeHTMLTag:function(a){return a&&"string"==typeof a&&(a=a.replace(/<\/?[^>]*>/g,""),a=a.replace(/[ | ]*\n/g,"\n"),a=a.replace(/&nbsp;/gi,"")),a},countdown:function(a,c,d,e,f){var g=this,h=c-1;f=f||"default",a&&($(a+":input").val(c),$(a).text(c)),c?(b[f]=setTimeout(function(){g.countdown(a,h,d,e,f)},1e3),e&&e(c)):d&&d()},clearCountdown:function(a){a=a||"default",clearTimeout(b[a])},wordsCount:function(a,b,c){$(a).on("keydown keyup blur mousecenter mouseleave mousemove",function(){var a=$(this).val().length||0,d=c-a;b&&$(b).text(d>0?d:0)}).attr("maxLength",c)},autoAddEllipsis:function(a,b,c){var d=this,e=d.cutString(a,b),f=e.cutFlag,g=e.cutString;return"1"==f?g+(c||"..."):g},cutString:function(a,b){var c=this;if(!a)return{cutString:"",cutFlag:""};var d,e=a.length,f="1",g=0,h=!1;if(b/2>=e&&(d=a,h=!0),!h)for(var i=0;e>i;i++){if(g+=c.isFull(a.charAt(i))?2:1,g>b){d=a.substring(0,i),h=!0;break}if(g==b){d=a.substring(0,i+1),h=!0;break}}return h||(d=a,h=!0),d.length==e&&(f="0"),{cutString:d,cutFlag:f}},isFull:function(a){for(var b=0;b<a.length;b++)return a.charCodeAt(b)>128},onBeforeBomUnload:function(a){$.browser.msie?window.document.body.onbeforeunload=a:(window.onBeforeUnload=a,$("body").attr("onbeforeunload","return onBeforeUnload();"))},toFixed:function(a,b){var c=parseFloat(a),d=b||2,e=Math.pow(10,d),f="0",g=0,h=0,i=0;if(c&&(f=Math.round(c*e)/e+""),g=f.indexOf("."),-1==g&&(f+="."),g=f.indexOf("."),h=f.substring(g,f.length).length-1,h>=d)f=f.substring(0,g+d+1);else for(;d-h>i;i++)f+="0";return f},IEVersion:function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",c[0];);return a>4?a:!1},isIE6:function(){return 6===this.IEVersion()},isIE7:function(){return 7===this.IEVersion()},isIE8:function(){return 8===this.IEVersion()},isIE9:function(){return 9===this.IEVersion()},trace:function(a,b){"dev"===ued_conf.mode&&window.console&&(b?console.log("%c"+a,"color:"+b):console.log(a))},arrayBufferToString:function(a){var b=this.arrayBufferToBase64(a);return this.binaryToString(b)},binaryToString:function(a){var b;try{return console.info(decodeURIComponent(escape(a))),decodeURIComponent(escape(a))}catch(c){if(b=c,b instanceof URIError)return a;throw b}},arrayBufferToBase64:function(a){for(var b="",c=new Uint8Array(a),d=c.byteLength,e=0;d>e;e++)b+=String.fromCharCode(c[e]);return b}}}),define("module/uuid",[],function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return{get:function(b,c){var d,e=a,f=[];if(c=c||e.length,b)for(d=0;b>d;d++)f[d]=e[0|Math.random()*c];else{var g;for(f[8]=f[13]=f[18]=f[23]="-",f[14]="4",d=0;36>d;d++)f[d]||(g=0|16*Math.random(),f[d]=e[19==d?3&g|8:g])}return f.join("")},fast:function(){for(var b,c=a,d=new Array(36),e=0,f=0;36>f;f++)8==f||13==f||18==f||23==f?d[f]="-":14==f?d[f]="4":(2>=e&&(e=33554432+16777216*Math.random()|0),b=15&e,e>>=4,d[f]=c[19==f?3&b|8:b]);return d.join("")},compact:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}}}),define("module/localStorage",[],function(){return{hostName:location.hostname||"localStatus",isLocalStorage:!!window.localStorage,dataDom:null,initDom:function(){if(!this.dataDom)try{this.dataDom=document.createElement("input"),this.dataDom.type="hidden",this.dataDom.style.display="none",this.dataDom.addBehavior("#default#userData"),document.body.appendChild(this.dataDom);var a=new Date;a=a.getDate()+30,this.dataDom.expires=a.toUTCString()}catch(b){return!1}return!0},set:function(a,b){this.isLocalStorage?window.localStorage.setItem(a,b):this.initDom()&&(this.dataDom.load(this.hostName),this.dataDom.setAttribute(a,b),this.dataDom.save(this.hostName))},get:function(a){var b=null;return this.isLocalStorage?b=window.localStorage.getItem(a):this.initDom()&&(this.dataDom.load(this.hostName),b=this.dataDom.getAttribute(a)),b},remove:function(a){this.isLocalStorage?localStorage.removeItem(a):this.initDom()&&(this.dataDom.load(this.hostName),this.dataDom.removeAttribute(a),this.dataDom.save(this.hostName))}}}),define("module/msgLS",["module/localStorage"],function(a){var b="lsMsg";return{save:function(c){var d=this.readAll(),e=c.groupId?d[c.senderId+"ToG"+c.groupId]:d[c.senderId+"To"+c.receiverId],f=[],g=!0;e&&(f=e,f.sort(function(a,b){return a.sendTime>b.sendTime}),f.length>299&&f.shift(),$.each(e,function(a,b){return c.messageId&&b.messageId==c.messageId?(g=!1,!1):void 0})),g&&(f.push(c),c.groupId?d[c.senderId+"ToG"+c.groupId]=f:d[c.senderId+"To"+c.receiverId]=f,a.set(b,JSON.stringify(d)))},saveList:function(c){var d=this.readAll();c&&($.each(c,function(a,b){var c=b.groupId?d[b.senderId+"ToG"+b.groupId]:d[b.senderId+"To"+b.receiverId],e=[],f=!0;c&&(e=c,e.sort(function(a,b){return a.sendTime>b.sendTime}),$.each(c,function(a,c){return b.messageId&&c.messageId==b.messageId?(f=!1,!1):void 0})),f&&(e.push(b),b.groupId?d[b.senderId+"ToG"+b.groupId]=e:d[b.senderId+"To"+b.receiverId]=e)}),a.set(b,JSON.stringify(d)))},read:function(c,d){var e=c+"To"+(group?"G":"")+d,f=d+"To"+(group?"G":"")+c,g=a.get(b),h=null;try{return h=$.parseJSON(g),$.merge(h[e]||[],h[f]||[])}catch(i){return h}},readGroup:function(c){var d=a.get(b),e=[];try{var f=$.parseJSON(d);return $.each(f,function(a,b){a.match(new RegExp("G"+c+"$"))&&(e=$.merge(e,b||[]))
}),e}catch(g){return e}},readAll:function(){var c=a.get(b)||"";return"object"!=$.type(c)&&(c=$.parseJSON(c)),c||{}},edit:function(c,d){var e=this.readAll();$.each(e,function(f,g){$.each(g,function(g,h){return h.messageId==c?(d&&(e[f][g]=d(h),a.set(b,JSON.stringify(e))),!1):void 0})})},removeGroup:function(c){var d=this.readAll(),e={};$.each(d,function(a,b){a.match(new RegExp("G"+c+"$"))||(e[a]=b)}),a.set(b,JSON.stringify(e))},formatChat:function(){var c=this.readAll(),d={};$.each(c,function(a,b){var c=[],e=null,f=null;b&&b.length&&$.each(b,function(a,b){e!=b.messageId&&f!=(b.sendTime||b.dateTime)&&c.push(b),e=b.messageId,f=b.sendTime||b.dateTime}),d[a]=c}),a.set(b,JSON.stringify(d))}}}),define("module/imTips",["common/interface","common/util","module/cookie"],function(a,b,c){var d=['<p class="chat-warn">#{content}</p>'].join("");return{init:function(){var a=this,b=$('<div id="chatBox">'),d=parseInt(c.get("_u_id"))||0,e=$.parseJSON(c.get("isOpenChat"+d))||{};$("#chatbox").length||$("body").append(b),!$.isEmptyObject(e)&&!e.closeChatWindow&&a.loadJs(),a.prompt()},loadJs:function(){var a=$("#chatBox"),b=a.find(".chat-warn");b.prepend('<div class="chat-load-js"></div>'),ued_import("chatJs","js",null,1)},prompt:function(){var a=this,c="最近联系人",e=$("#chatBox"),f=e.find(".chat-warn"),g=$(b.template(d,{content:c}));f.length||e.append(g),g.on("click",function(){window.isLoadChat||a.loadJs()})},fireChat:function(a){var b=this,d=parseInt(c.get("_u_id"))||0,e=$.parseJSON(c.get("isOpenChat"+d))||{};d?a.groupId||d!=a.userId?window.isLoadChat?(!$.isEmptyObject(e)&&e.closeChatWindow&&chatAct.openChat(),chatAct.setCurChat(a)):(a.closeChatWindow=!1,c.set("isOpenChat"+d,JSON.stringify(a)),b.loadJs()):$.alert("不能和自己聊天哟！"):location.href="/login?msg=1&referer="+encodeURIComponent(location.href)}}}),ued_conf.MC={mcSever:"172.16.4.200:8080",mcRegion:"1"},ued_conf.MC.mcApi=ued_conf.MC.mcSever?"http://"+ued_conf.MC.mcSever+"/getMCServer":"",define("module/mc",["common/util"],function(a){return{initConfig:function(){ued_conf.mcPath||(ued_conf.MC.mcApi?a.setAjax(ued_conf.MC.mcApi,{groupId:ued_conf.MC.mcRegion},function(a){a.error?$.alert("访问消息中心[M]出错 : "+a.error):a.addrIp&&a.wsPort&&(ued_conf.mcPath="ws://"+a.addrIp+":"+a.wsPort)},function(){$.alert("消息中心[M]繁忙，请稍后再试。")},"GET",!0):$.alert("无可访问的消息中心[M]地址.")),ued_conf.mcPath?console.debug("[MC]"+ued_conf.mcPath+" ..."):$.alert("无可访问的消息中心地址.")}}}),define("module/msgSocket",["common/interface","common/util","module/uuid","module/msgLS","module/cookie","module/imTips","module/mc"],function(a,b,c,d,e,f,g){var h=$("title").text(),i=!0,j=null,k=!1,l=null,m=!0,n=!1,o=!1,p=['<div class="home-num #{cls}" title="#{msgTitle}">','<div class="index-icon left"></div>','<div class="center">','<span class="home-num-txt">#{msgNum}</span>',"</div>",'<div class="index-icon right"></div>',"</div>"].join("");return window.isOpenChat={},{init:function(a){var c=this;c.curUid=parseInt(e.get("_u_id"))||0,c.isOpenChat=e.get("isOpenChat"+c.curUid)||{},c.token=a||e.get("_u_tk")||"",c.socket={},b.trace("用户ID："+c.curUid),f.init(),c.getDataForSelf(),c.initSocket(),c.setWindowFocus()},initSocket:function(){var a=this;a.socket={};try{(void 0===a.socket.readyState||a.socket.readyState>1)&&(ued_conf.mcPath||g.initConfig(),a.socket=new WebSocket(ued_conf.mcPath),a.socket.onopen=function(){a.socketOnOpen()},a.socket.onmessage=function(b){a.socketOnMessage(b.data)},a.socket.onerror=function(b){a.socketOnError(b)},a.socket.onclose=function(){a.socketOnClose()})}catch(b){$.browser.msie&&($("body").append('<object name="peerconnect_client_ocx" classid="clsid:963B7657-E3D7-4C8F-A8D3-C5FB2AFE37A8" id="peerconnect_client_ocx" class="none" codebase="'+ued_conf.cdnPath+'peerconnection.cab")"></object>'),a.socket_ocx=document.all.peerconnect_client_ocx,a.socket_ocx&&a.socket_ocx.WebSocket_Verify?(ued_conf.mcPath||g.initConfig(),a.socket_ocx.WebSocket_Open(ued_conf.mcPath+"/"),a.socket_ocx.attachEvent("WebSocket_OnOpen",function(){a.socketOnOpen()}),a.socket_ocx.attachEvent("WebSocket_onMessage",function(b){a.socketOnMessage(b)}),a.socket_ocx.attachEvent("WebSocket_OnError",function(b){a.socketOnError(b)}),a.socket_ocx.attachEvent("WebSocket_OnClose",function(){a.socketOnClose()})):$.alert('允许安装IE专用插件可以获得更好体验，安装完成后请<a href="javascript:location.reload()">刷新页面。</a><br>无法安装？<a href="'+ued_conf.cdnPath+'peerconnection.cab" target="_blank">点击下载插件</a>手动安装。'))}finally{window.socket=a}},socketOnOpen:function(){var a=this;window.sendChatArr={},a.startSocketTime=(new Date).getTime(),a.sendData(JSON.stringify({code:1,messageId:c.get(),id:a.curUid,token:a.token,type:0})),a.getUnreadChatMsg(),b.trace("Socket消息 socket open","blue")},socketOnMessage:function(a){var c=this;try{b.trace("Socket消息 return Data:"+a,"blue"),c.checkData($.parseJSON(a))}catch(d){throw d}},socketOnError:function(a){b.trace("Socket消息 socket error","blue"),a&&b.trace(a),setTimeout(function(){window.webIM&&(window.webIM.notice("notice","","通讯中断，请稍后重试！",4,!1),window.webIM.changeVideo(!0))},1e3)},socketOnClose:function(){b.trace("Socket消息 socket close","blue"),setTimeout(function(){window.webIM&&window.webIM.changeVideo(!0)},1e3)},sendData:function(a,c){var e=this,f=JSON.parse(a)||{},g=e.socket_ocx?e.socket_ocx.WebSocket_GetSocketState:e.socket.readyState;1==g?(e.socket_ocx?e.socket_ocx.WebSocket_Send(a):e.socket.send(a),(3==f.code||305==f.code)&&(f.sendTime=(new Date).getTime(),window.sendChatArr[f.messageId]={sendTime:f.sendTime,data:f},f.parentId?d.edit(f.parentId,function(a){return a.subSenderId=f.senderId,a.subName=f.senderName,a.subDate=f.data,a}):d.save(f)),b.trace("Socket消息 send Data:"+a,"blue")):(b.trace("Socket消息 socket连接异常","blue"),c&&c())},checkData:function(a){{var c=this,f=null,g=null;$(".J-chat-page")}if(!$.isEmptyObject(a))switch(a.code){case 0:break;case 2:c.sendData(JSON.stringify({code:2}));break;case 3:c.setNewChatMsg(a),c.getDataForSelf(),c.getUnreadChatMsg(),a.senderId&&(d.save(a),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:a.senderName+"发来消息",content:a.data,url:"/expert/detail/"+a.senderId}));break;case 5:var h=a.parentId&&"0"!=a.parentId;h?window.webIM&&window.webIM.setChatSendSuc(a.parentId):(window.webIM&&window.webIM.setChatSendSuc(a.messageId),d.edit(a.messageId,function(b){return b.sendTime=a.date,b})),delete window.sendChatArr[a.messageId];break;case 8:if(a.finish&&d.save(a),window.remain&&window.webIM){window.webIM.onRead(null,window.remain);var i=$('.chat-main[data-uuid="'+a.messageId+'"]');i.length&&i.find(".file-pic a").prop("href",a.url)}break;case 11:d.save(a),c.setNewChatMsg(a),c.getUnreadChatMsg(),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:a.senderName+"发来一个文件",content:a.fileName,url:"/expert/detail/"+a.senderId});break;case 13:d.save(a),c.setNewChatMsg(a),c.getUnreadChatMsg(),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:a.senderName+"发来语音消息",content:"打开网页查看语音消息",url:"/expert/detail/"+a.senderId});break;case 15:d.save(a),c.setNewChatMsg(a),c.getUnreadChatMsg(),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:a.senderName+"发来了一张图片",content:"打开网页查看图片",url:"/expert/detail/"+a.senderId});break;case 20:window.webIM&&(window.webIM.notice(),window.webIM.changeVideo(!0)),c.socket.close(),c.socket.onclose=function(){b.trace("Socket消息 socket close","blue"),clearTimeout(l),b.trace("Socket消息 clear reconnect","blue")};break;case 21:window.webIM&&(window.webIM.notice(),window.webIM.changeVideo(!0)),c.offlineTips(),c.socket.close(),c.socket.onclose=function(){b.trace("Socket消息 socket close","blue"),clearTimeout(l),b.trace("Socket消息 clear reconnect","blue")};break;case 103:"[/audio_invite_mc]"==a.data?a.data=a.senderName+"发起语音通话邀请":"[/video_invite_mc]"==a.data?a.data=a.senderName+"发起视频通话邀请":"[/audio_invite_timeout_mc]"==a.data?a.data=a.senderName+"发起的语音通话请求超时":"[/video_invite_timeout_mc]"==a.data?a.data=a.senderName+"发起的视频通话请求超时":"[/av_hangup_mc]"==a.data&&(a.data=a.senderName+"已挂断通话"),c.setNewChatMsg(a),a.senderId&&(d.save(a),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:a.senderName+"发来消息",content:a.data,url:"/expert/detail/"+a.senderId}));break;case 105:f=isOpenChat[c.curUid+"to"+a.receiverId],g=isOpenChat[c.curUid+"to"+a.senderId],c.curUid==a.senderId?(f||(f={}),f.self=1,isOpenChat[c.curUid+"to"+a.receiverId]=f):c.curUid==a.receiverId&&(g||(g={}),g.other=1,isOpenChat[c.curUid+"to"+a.senderId]=g);break;case 106:c.hideMsgBox();break;case 107:c.hideMsgBox();break;case 108:break;case 210:var j=(new Date).getTime();e.set("senderId",a.userId),e.set("senderName",a.userName),e.set("210",j),window.webIM&&(window.webIM.notice("invite-video",a.userName),window.webIM.changeVideo(!1)),c.chatTipAnimate("收到“"+b.autoAddEllipsis(a.userName,10)+"”的视频会话邀请",1),window.inviterTiper=b.countdown(null,60,function(){c.chatTipAnimate("",0)},null,"chatTipAnimate");break;case 211:window.webIM&&(window.webIM.notice(),window.webIM.openVideo(0),window.webIM.changeVideo(!1));break;case 212:window.webIM&&(b.clearCountdown(),window.webIM.notice(),window.webIM.changeVideo(!0));break;case 213:window.webIM&&(window.webIM.notice(),window.webIM.changeVideo(!0));break;case 220:var j=(new Date).getTime();e.set("senderId",a.userId),e.set("senderName",a.userName),e.set("220",j),window.webIM&&(window.webIM.notice("invite-voice",a.userName),window.webIM.changeVideo(!1)),c.chatTipAnimate("收到“"+b.autoAddEllipsis(a.userName,10)+"”的语音会话邀请",1),window.inviterTiper=b.countdown(null,60,function(){c.chatTipAnimate("",0)},null,"chatTipAnimate");break;case 221:window.webIM&&(window.webIM.notice(),window.webIM.openVideo(2),window.webIM.changeVideo(!1));break;case 222:window.webIM&&(b.clearCountdown(),window.webIM.notice(),window.webIM.changeVideo(!0));break;case 223:window.webIM&&(window.webIM.notice(),window.webIM.changeVideo(!0));break;case 242:window.webIM&&(window.webIM.changeVideo(!0),a.senderId==me.id&&a.receiverId==you.id?(window.webIM.notice("notice",a.userName,"您没有可调用的视频设备,或调用失败!"),e.del("210")):window.webIM.notice("notice",a.userName,"对方没有可调用的视频设备,或调用失败!"));break;case 252:window.webIM&&(window.webIM.changeVideo(!0),a.senderId==me.id&&a.receiverId==you.id?(window.webIM.notice(),e.del("220")):window.webIM.notice("notice",a.userName,"对方没有可调用的音频设备,或调用失败!"));break;case 260:e.del("210"),e.del("220"),window.webIM&&(window.webIM.changeVideo(!0),b.clearCountdown(),a.senderId==me.id&&a.receiverId==you.id,window.webIM.notice());break;case 270:if(e.del("210"),e.del("220"),window.webIM){var k=e.get("inviteeName"),m="正在语音或视频会话中,请先关闭该会话";k&&k!=a.inviteeName&&(m='正在和<strong class="user-name">'+k+"</strong>语音或视频会话中,请先关闭该会话"),window.webIM.notice("notice","",m,4),window.webIM.changeVideo(!1)}break;case 271:window.webIM&&(window.webIM.notice(),window.webIM.notice("notice","",'<strong class="user-name">'+a.inviteeName+"</strong>正在音频或视频中,请稍后!",4,!1),window.webIM.changeVideo(!0));break;case 305:2==a.type?d.edit(a.parentId,function(b){return b.subSenderId=a.senderId,b.subName=a.senderName,b.subDate=a.data,b}):d.save(a),c.setNewChatMsg(a),c.getUnreadChatMsg(),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:"群消息提醒",content:a.data,url:"/expert/detail/"+a.senderId});break;case 307:try{a.groupTips=$.parseJSON(a.message)}catch(n){}finally{switch(a.type){case 0:a.groupType="normal";break;case 1:a.groupType="multicommunicate";break;case 2:a.groupType="translate"}if(a.state){switch(a.state){case 10:a.message=a.groupTips.memberName+"创建群组："+a.groupName;break;case 11:a.message="邀请"+a.groupTips.memberName+"加入群组："+a.groupName;break;case 12:a.message=a.groupTips.memberName+"加入该群组";break;case 13:a.message=a.groupTips.memberName+"退出该群组";break;case 14:a.message=a.groupTips.memberName+"被群主移出该群组";break;case 15:a.message="该群组被群主"+a.groupTips.memberName+"解散"}9==a.state||a.state>=15||(13==a.state||14==a.state)&&a.groupTips.memberId==c.curUid||d.save(a),c.setNewChatMsg(a),c.getUnreadChatMsg(),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:"群消息提醒",content:a.message,url:"/expert/detail/"+a.senderId})}}break;case 308:if(a.finish&&d.save(a),window.remain&&window.webIM){window.webIM.onRead(null,window.remain);var i=$('.chat-main[data-uuid="'+a.messageId+'"]');i.length&&i.find(".file-pic a").prop("href",a.url)}break;case 311:d.save(a),c.setNewChatMsg(a),c.getUnreadChatMsg(),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:"群消息提醒",content:a.senderName+"分享了一个文件",url:"/expert/detail/"+a.senderId});break;case 313:d.save(a),c.setNewChatMsg(a),c.getUnreadChatMsg(),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:"群消息提醒",content:"收到 "+a.senderName+" 的语音消息",url:"/expert/detail/"+a.senderId});break;case 315:d.save(a),c.setNewChatMsg(a),c.getUnreadChatMsg(),c._notify({img:b.getAvatar(a.senderId),imgUrl:"/expert/detail/"+a.senderId,title:"群消息提醒",content:a.senderName+"分享了一张图片",url:"/expert/detail/"+a.senderId});break;case 317:try{a.groupTips=$.parseJSON(a.message)}catch(n){}finally{if(a.type)switch(a.type){case 0:a.groupType="normal";break;case 1:a.groupType="multicommunicate";break;case 2:a.groupType="translate"}if(a.state)switch(a.state){case 16:a.message=a.groupTips.memberName+"修改了群组名称";break;case 17:a.message=a.groupTips.memberName+"修改了群组头像";break;case 18:a.message=a.groupTips.memberName+"修改了群组名称和头像"}c.setNewChatMsg(a)}break;case 400:if(window.webIM)switch(a.data.action){case"notice":window.webIM.notice(a.data.type,a.data.name,a.data.content,a.data.time,!1);break;case"videoStatus":window.webIM.changeVideo(a.data.boolean,!1)}break;default:c.getDataForSelf(a.code)}},setNewChatData:function(a){var b=d.readAll();$.each(b,function(b,c){$.each(c,function(b,c){c&&c.messageId==a.messageId})})},setNewChatMsg:function(a){window.isLoadChat&&a.senderId&&chatAct.setChatMsg(a)},getDataForSelf:function(){var c=this;b.setAjax(a.getApiUrl().getNewMsgUrl,{},function(a){a.status&&(window.msgData=a,c.sysMsgTips(a))},null,"GET")},getUnreadChatMsg:function(){var c=this;b.setAjax(a.getApiUrl().getNewChatMsgUrl,{},function(a){a.status&&(window.chatData=a,c.chatMsgTips(a))},null,"GET")},offlineTips:function(){b.setAjax(a.getApiUrl().clearCookieUrl,{}),$.confirm("您的账号在别处登录，如非本人操作请及时登录并修改密码。",function(){location.href="/login"},function(){},{okValue:"重新登录",cancelValue:"我知道了"})},chatMsgTips:function(a){var c=this,d=$("#chatBox"),e=0,f="最近联系人",g="",h=0,i=JSON.parse(a.chatMsgNumJson)||[],j=(d.children(".chat-warn"),$("#contentLeft .userTypeTab"));if(i.length&&a.chatMsgNum){if(1===i.length){var k="person"==i[0].type?i[0].userName:i[0].groupName;f='<span class="chat-warn-u" title="'+k+'">'+b.autoAddEllipsis(k,12)+"</span>&nbsp;发来"+i[0].msgNum+"条消息"}else f=i.length+"个联系人&nbsp;发来"+a.chatMsgNum+"条消息";e=1}if(c.chatTipAnimate(f,e),j.length){var l=j.find(".home-num-trade");a.chatMsgNum?(a.chatMsgNum>99?(h="99+",g="您有超过99条未读聊天消息"):(h=a.chatMsgNum,g="您有"+a.systemMsgNum+"条未读聊天消息"),l.length?l.removeClass("none").find(".home-num-txt").text(h):(l=$(b.template(p,{cls:"home-num-trade",msgTitle:g,msgNum:h})),j.prepend(l))):l.remove()}window.msgData&&window.msgData.systemMsgNum||window.chatData&&window.chatData.chatMsgNum?c._title():c._cleanTitle()},chatTipAnimate:function(a,b){var c=a||"最近联系人",d=$("#chatBox"),e=d.children(".chat-warn"),f=e.prop("class");if(e.html(c),b){var g=function(a){var b=0,c=function(){b++,setTimeout(function(){e.toggleClass("chat-warn-h"),2*a>b?c():m=!0},600)};c()};m&&("chat-warn"==f&&e.addClass("chat-warn-h"),m=!1,g(3))}else f&&f.indexOf("chat-warn-h")>-1&&e.removeClass("chat-warn-h")},sysMsgTips:function(a){var c=this,d=$(".J-login-mark"),e=0,f="",g=d.find(".home-num-trade");a&&(a.systemMsgNum?(a.systemMsgNum>99?(e="99+",f="您有超过99条新消息"):(e=a.systemMsgNum,f="您有"+a.systemMsgNum+"条新消息"),g.length?g.find(".home-num-txt").text(e):(g=$(b.template(p,{cls:"home-num-trade",msgTitle:f,msgNum:e})),d.find("#J-header-msg").prepend(g))):g.length&&g.remove()),window.msgData&&window.msgData.systemMsgNum||window.chatData&&window.chatData.chatMsgNum?c._title():c._cleanTitle()},inviteConsult:function(c){var d=this,e=c.countDown||60,f=b.strFormat(a.getApiUrl().consultExportUrl,[c.userId]),g=['<div id="consultMsgBox">','<div class="cmb-tit clearfix">','<span class="span-left">咨询请求</span>',"</div>",'<div class="cmb-table">','<table border="0" width="100%">',"<tr>",'<td class="cmb-content" align="center">','<div class="countdown">','<input class="knob" data-min="0" data-max="60" data-readOnly=true data-bgColor="#ffd4d9" data-fgColor="#e06b64" data-displayInput=true data-width="85" data-height="85" data-thickness=".2">',"</div>",'<div class="tips-text">收到<span class="cmb-user">#{consultUser}</span>的视频咨询请求</div>',"</td>","</tr>","<tr>",'<td class="cmb-button">','<button class="btn-default btn-lg btn-green cmb-start"><i class="icon icon-consult"></i>立即开始</button>','<button class="btn-default btn-lg btn-white cmb-stop">拒绝咨询</button>',"</td>","</tr>","</table>","</div>","</div>"].join(""),h=$("#consultMsgBox");h.length?(b.clearCountdown(),$(".knob").val(0).trigger("change"),h.find(".cmb-content .tips-text").html('收到<span class="cmb-user">'+c.userName+"</span>的视频咨询请求"),h.find(".cmb-content .tips-red").remove(),h.find(".cmb-button").html('<button class="btn-default btn-lg btn-green cmb-start"><i class="icon icon-consult"></i>立即开始</button><button class="btn-default btn-lg btn-white cmb-stop">拒绝咨询</button>'),h.show()):(h=$(b.template(g,{consultUser:c.userName})),$("body").append(h)),$(".cmb-start").on("click",function(){window.open(f),d._consultClose("clear"),b.clearCountdown(),d._consultPoll()}),$(".cmb-stop").on("click",function(){d._rejectConsult(c.userId,function(){d._consultClose("clear"),b.clearCountdown(),d._consultPoll()})}),$(".knob").knob({draw:function(){this.$.val(this.v<10?"0"+this.v:this.v)}}),b.countdown(".knob",e,function(){var a=$('<button class="btn-default btn-lg btn-green cmb-remember">我知道了</button>');h.find(".tips-text").html('<span class="cmb-user">'+c.userName+"</span>的视频咨询请求已过期"),h.find(".cmb-content").append('<div class="tips-red">收到咨询请求请在60秒内接受或拒绝</div>'),h.find(".cmb-button").html(a),a.on("click",function(){d._consultPoll(),d._consultClose("clear")})},function(a){$(".knob").val(a).trigger("change")})},showMsgBox:function(d,e){var f=this,g=b.strFormat(a.getApiUrl().consultExportUrl,[e.senderId]),h=['<div id="consultMsgBox">','<div class="cmb-tit clearfix">','<span class="span-left">温馨提示</span>',"</div>",'<div class="cmb-table">','<table border="0" width="100%">',"<tr>",'<td class="cmb-content" align="center">','<div class="tips-text"><b>#{consultUser}</b> #{chatMessage}</div>',"</td>","</tr>","<tr>",'<td class="cmb-button">','<button class="btn-default btn-lg btn-green cmb-open">马上进入</button>','<button class="btn-default btn-lg btn-white cmb-ignore">忽略</button>',"</td>","</tr>","</table>","</div>","</div>"].join(""),i=$("#consultMsgBox");d?(i.length?i.stop().animate({opacity:1},1,function(){i.show().find(".tips-text b").html(e.senderName)}):(i=$(b.template(h,{consultUser:e.senderName,chatMessage:"退出聊天室"})),$("body").append(i)),i.find(".cmb-button").hide(),f._boxCountDown(i)):f._getChatStatus({otherUid:e.senderId,selfUid:f.curUid,reUid:e.receiverId},function(){i.length?i.stop().animate({opacity:1},1,function(){i.show().find("..tips-text b").html(e.senderName)}):(i=$(b.template(h,{consultUser:e.senderName,chatMessage:"邀请您进入聊天室"})),$("body").append(i)),i.find(".cmb-button").show(),f._boxCountDown(i),i.hover(function(){b.clearCountdown(),i.stop().animate({opacity:1},100)},function(){f._boxCountDown(i)}),$(".cmb-open").off("click").on("click",function(){$(this);f._getChatStatus({otherUid:e.senderId,selfUid:f.curUid,reUid:e.receiverId},function(){f.sendData(JSON.stringify({code:106,messageId:c.get(),userId:f.curUid})),window.open(g,e.senderId+"","height=446,width=1002,top=100,left=200,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no"),f.hideMsgBox()},function(){$.alert("已经存在与该用户的聊天窗口，请检查任务栏。")})}),$(".cmb-ignore").off("click").on("click",function(){f.sendData(JSON.stringify({code:107,messageId:c.get(),userId:f.curUid})),f.hideMsgBox()})})},hideMsgBox:function(){b.clearCountdown(),$("#consultMsgBox").hide()},_getChatStatus:function(c,d,e){if($.isEmptyObject(isOpenChat))b.setAjax(b.strFormat(a.getApiUrl().getSelfInChatUrl,[c.otherUid,c.selfUid]),{},function(a){a.status?e&&e():d&&d()},null,"GET");else{var f=c.selfUid==c.otherUid?isOpenChat[c.selfUid+"to"+c.reUid]:isOpenChat[c.selfUid+"to"+c.otherUid];f&&f.self?e&&e():d&&d()}},_boxCountDown:function(a){b.clearCountdown(),b.countdown(null,10,function(){a.stop().animate({opacity:0},2e3,function(){a.hide()})})},_resetChatList:function(){},_consultClose:function(a){var c=this;$(".knob").val(60).trigger("change"),$("#consultMsgBox").hide(),b.clearCountdown(),a&&"clear"==a&&c._cleanTitle("新咨询")},_consultPoll:function(){b.setAjax(a.getApiUrl().getConsultPollUrl,{},function(){},null,"GET")},_tip:function(){var a=$('<embed src="'+ued_conf.root+'images/tips.mp3" hidden="true" type="audio/mpeg" loop="0" autostart="true"/>');!document.createElement("video").canPlayType||(a=$('<video src="'+ued_conf.root+'images/tips.mp3" autoplay="true" width="0" height="0"/>')),$("body").append(a),setTimeout(function(){a.remove()},1e4)},_title:function(a){var b=this,c=(i?"【"+(a||"新消息")+"】":"【　　　】")+h;$(document).attr("title",c),i=!i,k=!0,clearTimeout(j),j=setTimeout(function(){b._title(a)},1e3)},_cleanTitle:function(a){var b=$("title").text();b!==h&&(a?b.indexOf(a)>-1&&($(document).attr("title",h),i=!1,k=!1,clearTimeout(j)):($(document).attr("title",h),i=!1,k=!1,clearTimeout(j)))},_notify:function(a){var b=this;if((o||b._isPageMinimized())&&window.webkitNotifications)if(0==window.webkitNotifications.checkPermission()){var c=window.webkitNotifications.createNotification(a.img,a.title,a.content);c.display=function(){},c.onerror=function(){},c.onclose=function(){},c.onclick=function(){this.cancel()},c.replaceId="chatNotify",c.show(),n=!1}else n||(n=!0,window.webkitNotifications.requestPermission(b._notify(a)));else if(window.Notification){var d=new Notification(a.title,{iconUrl:a.img,tag:"tag_by_alien",body:a.content});d.onerror=function(){},d.onshow=function(){},d.ondisplay=function(){},d.onclick=function(){d.cancel()},d.onclose=function(){};try{d.show()}catch(e){}}},setWindowFocus:function(){window.onblur=function(){o=!0},window.onfocus=function(){o=!1}},_isPageMinimized:function(){for(var a=["mozHidden","msHidden","webkitHidden","oHidden"],b=a.length;b--;)if("boolean"==typeof document[a[b]])return document[a[b]];return"number"==typeof window.screenTop?window.screenTop<-3e4:window.outerWidth<=160&&window.outerHeight<=27}}}),define("module/placeholder",["common/util"],function(a){var b='<span class="placeholder">{0}</span>';return{init:function(){if(!("placeholder"in document.createElement("input"))){var c=$('input[placeholder][type="text"], input[placeholder][type="password"], textarea[placeholder]')||$();c.each(function(c,d){var e=$(d),f=e?e.attr("placeholder"):null;if(f&&f.length>0&&e.val().length<1){if(e.next("span").hasClass("placeholder"))return;var g=$(a.strFormat(b,[f])),h=e.clone(),i=$("body"),j=e.outerHeight(),k=0,l=e.position(),m=e.parent().css("position"),n=parseInt(e.css("padding-left"))+parseInt(e.css("text-indent"))||10,o=e.css("padding-top");h.css({position:"absolute",top:"-100000px"}),i.append(h),k=h.outerHeight(),j=k>j?k:j,h.remove(),"relative"!=m&&"absolute"!=m&&e.parent().css("position","relative"),e.after(g),o=(j-18)/2+l.top,g.css({top:o,left:n+2+l.left,position:"absolute"}),e.on("keyup keypress keydown",function(){}).on("blur",function(){0===$(this).val().length?g.show():g.hide()}).on("focus",function(){g.hide()}),$(".placeholder").on("click",function(){$(this).siblings('input[type="text"], input[type="password"], input[type="submit"]').focus()})}})}},_holder:function(a,b){a.length<0?b.show():b.hide()}}}),define("module/fixed",[],function(){return{init:function(a){var b=this,c={target:null,beforeFixed:null,afterFixed:null,afterNoFixed:null};b.opt=$.extend(c,a||{});var d=b.opt.target,e=d.clone(),f=d.offset()?d.offset().top:0;return b.beforeFixed(e),b.scroll(function(a){a>f?(d.after(e),e.show(),b.opt.afterFixed&&b.opt.afterFixed(b.opt.target,e)):(e.hide(),b.opt.afterNoFixed&&b.opt.afterNoFixed(b.opt.target,e))}),this},scroll:function(a){$(window).on("scroll",function(){var b=$(window).scrollTop();a&&a(b)})},beforeFixed:function(a){this.opt.beforeFixed&&this.opt.beforeFixed(this.opt.target,a)},remove:function(){this.call(null)}}}),define("module/goTop",[],function(){return{init:function(){var a=this,b=['<div id="rightBox">','<div class="right-item show-fb "><a href="/feedback" target="_blank"><table><tr><td class="right-item-cell"><em class="show-fb-icon"></em></td><td class="right-item-cell go-top-text">反馈<br>建议</td></tr></table></a></div>','<div class="right-item scan-phone"><a href="/phone" target="_blank"><table><tr><td class="right-item-cell"><em class="scan-qrcode-icon"></em></td><td class="right-item-cell go-top-text">手机<br>版</td></tr></table></a></div>','<div class="right-item show-service"><a href="/tagsearch?st=嗨啰在线客服" target="_blank"><table><tr><td class="right-item-cell"><em class="show-service-icon"></em></td><td class="right-item-cell go-top-text">客服</td></tr></table></a></div>','<div class="right-item go-top"><table><tr><td class="right-item-cell"><em class="go-top-icon"></em></td><td class="right-item-cell go-top-text">返回<br>顶部</td></tr></table></div>',"</div>"].join("");$("body").append(b);{var c=$("#rightBox .go-top");$("#rightBox")}a._effect(c),$(window).scroll(function(){a._effect(c)}),c.on("click",function(){$("html, body").animate({scrollTop:0},200)})},_effect:function(a){$(document).scrollTop()>150?a.fadeIn(200):a.fadeOut(200)}}}),define("module/searchType",["module/cookie"],function(a){var b=function(b,c,d){var e=b,f=e.find(".search-type-panel"),g=e.find(".search-type-btn"),h=c,i=e.find(".J-header-search-input"),j=e.find(".search-btn"),k=new Date,l=new Date(1e3*(k/1e3+43200)),m=(i.attr("placeholder"),a.get("searchType")),n=d.userData,o=d.groupData,p=d.serviceData,q=d.requireData,r=this;switch(this.setActive=function(b){h.attr("class",b.btnClass),e.attr("action",b.searchUrl),i.attr("placeholder",b.searchTip),a.set("searchType",b.text,l)},m||(r.setActive(n),m="user"),m){case"user":r.setActive(n);break;case"group":r.setActive(o);break;case"service":r.setActive(p);break;case"require":r.setActive(q)}g.on("click",function(a){f.slideToggle(100),a.stopPropagation()}),f.on("click","li",function(a){var b=$(this),c=$.trim(b.attr("class"));switch(c){case"search-type-user":r.setActive(n);break;case"search-type-group":r.setActive(o);break;case"search-type-service":r.setActive(p);break;case"search-type-require":r.setActive(q)}f.hide(),a.stopPropagation()}),j.on("click",function(a){var b=$.trim(i.val());return b.length<1?(i.val(""),a.preventDefault(),!1):void 0}),$(document).on("click",function(a){f.hide(),a.stopPropagation()})};return{SearchTypeSwitch:b}}),define("module/pageCommon",["common/interface","common/util","module/msgSocket","module/placeholder","module/fixed","module/goTop","module/msgSocket","module/cookie","module/searchType"],function(a,b,c,d,e,f,c,g,h){f.init();var i=$(".header-search"),j=i.find(".search-type-btn"),k={btnClass:"search-type-btn",text:"user",searchUrl:"/expertsearch",searchTip:"搜索服务者"},l={btnClass:"search-type-btn search-type-btn-group",text:"group",searchUrl:"/searchgroup",searchTip:"搜索群组"},m={btnClass:"search-type-btn search-type-btn-service",text:"service",searchUrl:"/services/search",searchTip:"搜索服务"},n={btnClass:"search-type-btn search-type-btn-require",text:"require",searchUrl:"/require/search",searchTip:"搜索需求"},o={userData:k,groupData:l,serviceData:m,requireData:n},p=new h.SearchTypeSwitch(i,j,o);return{initLogin:function(){var a=this;a.browserDetect(),a.devCenter(),a.msgPanel(),d.init(),$(".J-login-mark").length>0&&c.init(),b.imgLoadError()},setTimezone:function(){var a=(new Date).getTimezoneOffset();$.get("/timezone?offset="+a)},initConsult:function(){var a=['<div class="dialog-panel">','<div class="dialog-tit clearfix">','<span class="span-left">咨询请求</span>',"</div>",'<table class="dialog-table">',"<tr>",'<td><div class="icon-alert"></div></td>','<td class="d-alert-content">收到 <a href="#{uid}" style="font-size: 16px; font-weight: bold; color: #4083a9;">#{userName}</a> 的视频咨询请求，5秒后自动接听</td>',"</tr>","</table>","</div>"].join(""),c=null;$.dialog({content:b.template(a,{uid:1,userName:"马立三"}),okValue:"立即开始",fixed:!0,ok:function(){window.location.href="/consult/begin?id=1"},cancelValue:"拒绝咨询",cancel:function(){var a=$(this.dom.wrap[0]),b=$(this.dom.close[0]);a.css({bottom:"auto",right:"auto"}),this.fixed=!1,this._reset(),b.css({right:-10,top:-10}),clearTimeout(c)},initialize:function(){var a=$(this.dom.wrap[0]),b=$(this.dom.close[0]);a.css({left:"auto",top:"auto",bottom:10,right:10}),b.css({right:10,top:10}),c=setTimeout(function(){window.location.href="/consult/begin?id=1"},1e4)}})},devCenter:function(){var a=$(".J-login-mark"),b=a.find(".home"),c=a.find(".home-panel"),d=c.height();b.hover(function(){c.show(),c.height(0),c.stop().animate({height:d},200)},function(){c.stop().animate({height:0},200,function(){c.hide()})})},browserDetect:function(){var a=['<div class="browser-tips">','<div class="browser-tips-inner clearfix">','<div class="index-icon index-icon-i"></div>',"<p>helome 建议您下载最新版 Google Chrome 浏览器，以获得最佳浏览效果，否则将无法实时向对方发起视频交流</p>",'<a href="http://www.google.cn/intl/zh-CN/chrome/browser/" target="_blank">立即下载</a>',"</div>","</div>"].join("");(!(window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection)||!window.WebSocket)&&$("body").prepend(a)},fixedBanner:function(){$(".menuFixed").length||e.init({target:$("#header"),afterNoFixed:function(a){a.css("position","relative")},afterFixed:function(a,b){a.css({position:"fixed",width:"100%",top:0,"z-index":1900}),b.show()}})},msgPanel:function(){var d=0,e=[],f=!1,g=0,h=0,i=0,j=$(".msg-header-block"),k=j.eq(0),l=j.eq(1),m=j.eq(2),n=$("#msg-system-content"),o=$("#msg-at-content"),p=$("#msg-group-content"),q='<div class="index-icon index-icon-msg-noread"></div>',r='<div class="msg-loading"><span class="loader"></span></div>';$("#J-header-msg").on("click",function(a){$(".msg").toggle(),$(".msg").is(":hidden")?(s(),t(),f=!1,e=[]):(f=!0,$(".msg-content").append(r),C(function(){z(),$(".msg-loading").remove()})),a.stopPropagation()}),$(document).on("click",function(){$(".msg").is(":hidden")||(s(),t(),f=!1,e=[],$(".msg").toggle())}),$(".msg").on("click",function(a){a.stopPropagation()}),j.on("click",function(a){var b=$(this).index();d=b,$(this).siblings(".msg-header-block").find(".icon").removeClass("active"),$(this).find(".icon").addClass("active"),j.eq(d).find(".index-icon").remove(),$(".msg-box").find(".msg-main").eq(d).removeClass("hide").siblings(".msg-main").addClass("hide"),d!=b&&(C(),a.stopPropagation())});var s=function(){$(".msg-content").html("")},t=function(){j.find(".icon").removeClass("active"),j.eq(0).find(".icon").addClass("active"),$(".msg-main").addClass("hide"),n.parent(".msg-main").removeClass("hide")},u=function(){n.append("<div class='no-msg'>你会在这里收到系统消息。</div>")},v=function(){o.append("<div class='no-msg'>你会在这里收到好友圈消息。</div>")},w=function(){p.append("<div class='no-msg'>你会在这里收到群组消息。</div>")},x=function(c){var f=['<div class="msg-item #{isFixHight}" data-id="#{messageId}" data-gid="#{groupId}" data-uid="#{userId}">','<div class="msg-item-inner">#{content}</div>',"#{addBtn}","</div>"].join(""),k="",l="",m="";c&&c.length&&$.each(c,function(c,d){var g="",h=d.content,i=0,j="",n='<div class="msg-item-btnbox"><div class="icon icon-delete btn-delete"></div></div>';switch(d.msgType){case"COMMENT":g='<a href="/expert/detail/'+d.senderId+'" class="mr5" target="_blank">'+d.senderName+"</a>评论了你："+h+'<a href="'+b.strFormat(a.getApiUrl().commentReplyUrl,[d.refId])+'" class="ml5" target="_blank">回复</a>';
break;case"REPLY":g='<a href="/expert/detail/'+d.senderId+'" class="mr5" target="_blank">'+d.senderName+"</a>回复了你："+h+'<a href="'+b.strFormat(a.getApiUrl().commentReplyUrl,[d.refId])+'" class="ml5" target="_blank">回复</a>';break;case"TRANSFER_IN":g='<a href="/expert/detail/'+d.senderId+'" class="mr5" target="_blank">'+d.senderName+'</a>给你转入了 <span class="green">'+(2==d.currency?"$":"￥")+d.amount+"</span>";break;case"TRANSFER_OUT":g='你的账户转出 <span class="red">'+(2==d.currency?"$":"￥")+d.amount+'</span>，转给：<a href="" class="ml5">'+d.senderName+"</a>";break;case"RESUME_FINISH":g='<a class="mr5" href="javascript:;">嗨啰翻译中心</a>已把您的英文海外简历翻译完成。<a class="ml5" href="'+h+'" target="_blank">立刻查看。</a>';break;case"ADD_FRIENDS":g='<a userId = "'+d.senderId+'" class="mr5" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+"</a>邀请您加入Ta的圈："+h,i=1,n='<div class="msg-item-btnbox btn-double"><div class="icon icon-right J-add-friend"></div><div class="icon icon-delete btn-delete"></div></div>';break;case"AGREE_FRIENDS":g='<a userId = "'+d.senderId+'" class="mr5" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+"</a>已经同意加入您的圈。",i=1;break;case"INVIT_GROUP_MEMBER":g='<a class="mr5" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+'</a>邀请您加入群<a class="ml5" href="/group/detail/'+d.groupId+'" target="_blank">'+d.groupName+"</a>",n='<div class="msg-item-btnbox btn-double"><div class="icon icon-right J-add-group"></div><div class="icon icon-delete btn-delete"></div></div>',i=2;break;case"AGREE_GROUP_INVIT":g='<a userId = "'+d.senderId+'" class="mr5" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+'</a>已加入群<a class="ml5" href="/group/detail/'+d.groupId+'" target="_blank">'+d.groupName+"</a>",i=2;break;case"REJECT_GROUP_INTVIT":g='<a userId = "'+d.senderId+'" class="mr5" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+'</a>拒绝加入群<a class="ml5" href="/group/detail/'+d.groupId+'" target="_blank">'+d.groupName+"</a>",i=2;break;case"REMOVE_GROUP_MEMBER":g='您已被移出群<a class="ml5" href="/group/detail/'+d.groupId+'" target="_blank">'+d.groupName+"</a>",i=2;break;case"QUIT_GROUP":g='<a userId = "'+d.senderId+'" class="mr5" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+'</a>已退出群<a class="ml5" href="/group/detail/'+d.groupId+'" target="_blank">'+d.groupName+"</a>",i=2;break;case"APPLY_GROUP":g='<a class="mr5" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+'</a>申请加入群<a class="ml5" href="/group/detail/'+d.groupId+'" target="_blank">'+d.groupName+"</a>："+h,n='<div class="msg-item-btnbox btn-double"><div class="icon icon-right J-apply-group"></div><div class="icon icon-delete btn-delete"></div></div>',i=2;break;case"DISMISS_GROUP":g='<a userId = "'+d.senderId+'" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+'</a>解散了群<a class="ml5" href="/group/detail/'+d.groupId+'" target="_blank">'+d.groupName+"</a>",i=2;break;case"AGREE_GROUP_APPLY":g='<a userId = "'+d.senderId+'" href="/expert/detail/'+d.senderId+'" target="_blank">'+d.senderName+'</a>已同意您加入群<a class="ml5" href="/group/detail/'+d.groupId+'" target="_blank">'+d.groupName+"</a>",i=2}switch(d.isRead||(g="<b>"+g+"</b>"),i){case 0:e.push(d.messageId);break;case 1:if(j="msg-item-fix",d.isHandler)return!0;break;case 2:if(j="msg-item-fix",d.isHandler)return!0}var o={content:g,isFixHight:j,addBtn:n,messageId:d.messageId,userId:d.senderId,groupId:d.groupId},p=b.template(f,o);switch(i){case 0:k+=p;break;case 1:l+=p;break;case 2:m+=p}}),n.append(k),o.append(l),p.append(m),g=n.find(".msg-item").length,h=o.find(".msg-item").length,i=p.find(".msg-item").length,0==g&&u(),0==h&&v(),0==i&&w(),j.eq(d).find(".index-icon").remove()},y=function(d){b.setAjax(a.getApiUrl().markUnreadMsg,{messageId:d},function(){console.log("clean system message"),c.getDataForSelf()},function(){$.alert("服务器繁忙，请稍后再试。")},"POST")},z=function(){h>0&&l.append(q),i>0&&m.append(q),0==g&&h>0&&l.trigger("click"),0==g&&0==h&&i>0&&m.trigger("click"),0==g&&0==h&&0==i&&k.trigger("click"),j.eq(d).find(".index-icon").remove()},A=function(a){a.parent(".msg-item-btnbox").removeClass("btn-double"),a.replaceWith("已同意")},B=function(){var e=$(".msg-box").find(".btn-delete"),f=$(".J-add-friend"),j=$(".J-add-group"),k=$(".J-apply-group");f.on("click",function(){var d=$(this),e=d.closest(".msg-item"),f=e.attr("data-id"),g=e.attr("data-uid"),h=d.closest(".msg-content"),i=$(r);h.append(i),b.setAjax(a.getApiUrl().addFriend,{friendId:g,messageId:f},function(e){e.status?A(d):$.alert(e.error),y([f]),i.remove(),b.setAjax(a.getApiUrl().updateMsgUrl,{},function(){c.getDataForSelf()},null,"GET")},function(){$.alert("服务器繁忙，请稍后再试。"),i.remove()},"GET")}),j.on("click",function(){var d=$(this),e=d.closest(".msg-item"),f=e.attr("data-id"),g=e.attr("data-gid"),h=e.attr("data-uid"),i=d.closest(".msg-content"),j=$(r);i.append(j),b.setAjax(a.getApiUrl().groupAgreeInvite,{userId:h,groupId:g,messageId:f},function(e){e.status?A(d):$.alert(e.error),y([f]),j.remove(),b.setAjax(a.getApiUrl().updateMsgUrl,{},function(){c.getDataForSelf()},null,"GET")},function(){$.alert("服务器繁忙，请稍后再试。"),j.remove()},"GET")}),k.on("click",function(){var d=$(this),e=d.closest(".msg-item"),f=e.attr("data-id"),g=e.attr("data-gid"),h=e.attr("data-uid"),i=d.closest(".msg-content"),j=$(r);i.append(j),b.setAjax(a.getApiUrl().groupAgreeApply,{userId:h,groupId:g,messageId:f},function(e){e.status?A(d):$.alert(e.error),y([f]),j.remove(),b.setAjax(a.getApiUrl().updateMsgUrl,{},function(){c.getDataForSelf()},null,"GET")},function(){$.alert("服务器繁忙，请稍后再试。"),j.remove()},"GET")}),e.on("click",function(){var e=$(this),f=e.closest(".msg-item"),j=f.attr("data-id"),k=e.closest(".msg-content"),l=$(r);k.append(l),b.setAjax(a.getApiUrl().deleteMessageUrl,{id:parseInt(j)},function(e){if("200"===e.status){switch(f.remove(),l.remove(),d){case 0:g--,0==g&&u();break;case 1:h--,0==h&&v();break;case 2:i--,0==i&&w()}b.setAjax(a.getApiUrl().updateMsgUrl,{},function(){c.getDataForSelf()},null,"GET")}else $.alert(e.message)},function(){$.alert("服务器繁忙，请稍后再试。"),l.remove()})})},C=function(f){b.setAjax(a.getApiUrl().getMsgUnread,{},function(h){var i=h;s(),x(i),0==d&&g>0&&(y(e),b.setAjax(a.getApiUrl().updateMsgUrl,{},function(){c.getDataForSelf()},null,"GET")),B(),f&&f()},function(a){b.trace("Failed to fetch data, Develope by Young Foo"+a.error,"green")},"GET")}},searchTypeInstance:p,searchData:o}}),define("module/prettifyForm",["common/util"],function(a){window.selectIndexId=0;var b='<a class="select" data-id="#{eleID}" data-name="#{eleName}" href="javascript:;"><div class="select-head"><span class="select-head-title" data-value="#{eleValue}">#{eleTitle}</span><em></em></div><ul class="select-bar fl" data-act="hide" tabindex="1">#{eleOption}</ul></a>',c='<a class="radio-btn" data-id="#{eleID}" data-value="#{eleValue}" data-name="#{eleName}" href="javascript:;"><span class="radio #{isChecked}"></span><span class="radio-title">#{eleTitle}</span></a>',d='<a class="checkbox-btn #{isDisabled} clearfix" data-id="#{eleID}" data-value="#{eleValue}" data-name="#{eleName}" href="javascript:;"><span class="checkbox #{isChecked}"></span><span class="checkbox-title">#{eleTitle}</span></a>',e=function(c){c=c||{},c.list={};var d,e,f={},g=!1;if(c.target){var h=$(c.target);d="select"==h[0].tagName.toLowerCase()?$(c.target):h.find("select")}else d=$(document).find("select");c.change&&(e=c.change);var i=function(a,b){var c=a,d=c.find("option:selected").val(),e=c.find("option:selected").text(),f=c.find("option"),g="",h=c.attr("id"),i=c.prop("disabled");h||(c.attr("id","select"+b),h="select"+b);var j="#"+h;f.each(function(){var a=$(this).html(),b=$(this).is("option:selected"),c=$(this).text(),d=$(this).attr("value"),e=d.indexOf("<img")>-1;g+=b?e?'<li class="highlight image clearfix" data-value="'+(d||c)+'">'+(d||a)+"</li>":'<li class="highlight" data-value="'+(d||c)+'">'+c+"</li>":e?'<li class="image clearfix" data-value="'+(d||c)+'">'+(d||a)+"</li>":'<li data-value="'+(d||c)+'">'+c+"</li>"});var k={eleID:h||"",eleName:c.attr("name")||"",eleValue:d||"",eleTitle:e||"",eleOption:g,sharpId:j,isDisabled:i};return k},j=function(a){var b,c,d=a.find(".select-bar li"),e=a.children(".select-bar"),f=$.trim(a.find(".select-head-title").text()),h=d.length-1,i=0,j=0;for(c=h;c>=0;c-=1){var k=d.eq(c),l=$.trim(k.text());if(f===l){b=k,b.hasClass("highlight")||b.addClass("highlight").siblings().removeClass("highlight"),i=c;break}b=d.eq(0),b.addClass("highlight").siblings().removeClass("highlight")}var n=b?b.outerHeight():null,p=d.length*n;e.off("keydown"),e.on("keydown",function(a){if(38===a.keyCode)return a.preventDefault(),b.removeClass("highlight"),i--,0>i?(i=h,j=p-n):j-=n,d.eq(i).addClass("highlight"),e.scrollTop(j),b=d.eq(i),m(b),void 0;if(40===a.keyCode)return a.preventDefault(),b.removeClass("highlight"),i++,i>h?(i=0,j=0):j+=n,d.eq(i).addClass("highlight"),e.scrollTop(j),b=d.eq(i),m(b),void 0;if(13===a.keyCode){a.stopPropagation();for(var c,f,k=d.length-1,f=k;f>=0;f-=1)d.eq(f).hasClass("highlight")&&(c=d.eq(f));c&&(o(c),g=!0)}})},k=function(a){var b=a,c=b.children(".select-bar"),d="hide"!==c.attr("data-act");d?(c.slideUp(200),c.attr("data-act","hide")):(c.slideDown(200),c.attr("data-act","show"),c.focus(),j(b))},l=function(a){$(".select-bar").slideUp(200);{var b=a,c=b.find(".select-head"),d=c.siblings(".select-bar"),e=d.find("li");b.find(".select-head-title"),b.attr("data-id")}b.focus(),k(b),e.off(),e.on("click",function(a){a.stopPropagation(),o($(this))})},m=function(a){var b=a.closest(".select"),c=b.attr("data-id"),d=b.find(".select-head-title");$("#"+c).val(a.attr("data-value")||a.text()),d.attr("data-value",a.attr("data-value")).text(a.text())},n=function(a,b){if(a&&a.length){var c=a,d=c.attr("data-id"),e=c.find(".select-head-title");b=b||$("#"+d).find("option").eq(0).text(),$("#"+d).val(b),e.attr("data-value",b).text(b)}},o=function(a){var b=a.closest(".select-bar"),c=b.parent(".select"),d=c.attr("data-id");a.addClass("highlight").siblings().removeClass("highlight"),m(a),!e||e(a.attr("data-value"),a.text());for(var g in f)if(d==g){var h={};h.selected=a,h.selectedText=a.text(),f[d](h)}b.slideUp(200),b.attr("data-act","hide"),c.focus()};d.each(function(d,e){var f=$(e).next(".select");if(0!==f.length)return!0;var g=i($(e),window.selectIndexId);window.selectIndexId++,f=$(a.template(b,g)),g.isDisabled&&(f.addClass("disabled"),f.find("em").remove()),$(e).after(f),c.width&&(f.width(c.width),f.find("li").each(function(a,b){$(b).width()<c.width&&$(b).width(c.width-42)})),$(e).hide(),c.list[g.sharpId]=$("[data-id='"+g.eleID+"']")});var p=$(document).find(".select"),q=p.find(".select-bar");if(c.horizontalPos)switch(c.horizontalPos){case"left":p.css({"float":"left"});break;case"middle":p.css({"float":"none"});break;case"right":p.css({"float":"right"});break;default:p.css({"float":"left"})}return c.width&&p.css({"":"left"}),p.off(),p.on("click keydown",function(a){if(a.stopPropagation(),!$(this).hasClass("disabled"))if("click"===a.type){if(g===!0)return void(g=!1);l($(this))}else"keydown"===a.type&&13===a.keyCode&&(a.preventDefault(),g=!0,l($(this)))}),p.on("mousedown",function(a){a.preventDefault()}),q.on("mousedown",function(a){a.preventDefault()}),$(document).on("click",function(){q.slideUp(200),q.attr("data-act","hide")}),{change:function(a){e=a},get:function(a){return void 0===a?c.list:c.list[a]},selectChange:function(a,b){var c=a.attr("data-id");f[c]=b},setSelectVal:n}},f=function(b){b=b||{},b.list={};var d,e,f={};if(b.target){var g=$(b.target);e="input"==g[0].tagName.toLowerCase()?$(b.target):g.find("label input[type='radio']")}else e=$(document).find("label input[type='radio']");b.change&&(d=b.change);var h=function(a,b){var c=$(a).prop("checked")?"checked":"",d=$(a).attr("value"),e=$(a).attr("id");d="on"===d?"":d,e||($(a).attr("id","radio"+b),e="radio"+b);var f="#"+e,g={eleID:e,eleValue:d||"",eleName:$(a).attr("name")||"",isChecked:c,eleTitle:$(a).next("span").text()||"",sharpId:f};return g},i=function(a){var b=a.find(".radio"),c=a.attr("data-id"),e=a.attr("data-name"),g=a.siblings("label").find("input[id='"+c+"']"),h=$(".radio-btn[data-name='"+e+"']"),i=h.find(".radio");i.removeClass("checked"),b.addClass("checked"),g.prop("checked",!0),g.parent().siblings("label").children("input[type='radio']").prop("checked",!1),a.focus(),!d||d(g);for(var j in f)c==j&&f[c]()},j=function(a){var b=a.find(".radio");b.hasClass("checked")||i(a)},k=function(a){a&&a.length&&i(a)};e.each(function(d){var e=$(this).parent("label").next(".radio-btn");if(0!==e.length)return!0;var f=h(this,d);$(this).parent("label").after(a.template(c,f)),$(this).parent().hide(),b.list[f.sharpId]=$("[data-id='"+f.eleID+"']")});var l=$(document).find(".radio-btn");if(b.horizontalPos)switch(b.horizontalPos){case"left":l.css({"float":"left"});break;case"middle":l.css({"float":"none"});break;case"right":l.css({"float":"right"});break;default:l.css({"float":"left"})}return l.on("click keydown",function(a){"click"===a.type?(a.preventDefault(),j($(this))):"keydown"===a.type&&13===a.keyCode&&(a.preventDefault(),j($(this)))}),{change:function(a){d=a},get:function(a){return void 0===a?b.list:b.list[a]},radioChange:function(a,b){var c=a.attr("data-id");f[c]=b},setRadioVal:k}},g=function(b){b=b||{},b.list={},b.change=b.change||{};var c,e={},f={};if(b.target){var g=$(b.target);c="input"==g[0].tagName.toLowerCase()?$(b.target):g.find("label input[type='checkbox']")}else c=$(document).find("label input[type='checkbox']");b.change.ok&&(f.ok=b.change.ok,f.cancel=b.change.cancel);var h=function(a,b){var c=$(a).prop("checked")?"checked":"",d=$(a).attr("value"),e=$(a).attr("id"),f=$(a).attr("disabled");d="on"===d?"":d,e||($(a).attr("id","checkbox"+b),e="checkbox"+b);var g="#"+e,h={eleID:e,eleName:$(a).attr("name")||"",eleValue:d||"",eleTitle:$(a).next("span").text()||"",sharpId:g,isChecked:c,isDisabled:void 0===f?"":"disabled"};return h},i=function(a){var b=a.find(".checkbox"),c=a.attr("data-id"),d=a.siblings("label").find("input[id='"+c+"']"),g={};for(var h in e)c==h&&(g=e[c]);b.hasClass("checked")?(b.removeClass("checked"),d.prop("checked",!1),g.cancel&&g.cancel(),f.cancel&&f.cancel()):(b.addClass("checked"),d.prop("checked",!0),g.ok&&g.ok(),f.ok&&f.ok()),a.focus()},j=function(a){if(!a.hasClass("disabled")){{a.find(".checkbox")}i(a)}},k=function(a){if(a&&a.length){var b=a.find(".checkbox");b.hasClass("checked")||i(a)}},l=function(a){if(a&&a.length){var b=a.find(".checkbox");b.hasClass("checked")&&i(a)}},m=function(a){a&&a.length&&j(a)};c.each(function(c){var e=$(this).parent("label"),f=e.next(".checkbox-btn");if(0!==f.length)return!0;var g=h(this,c);e.after(a.template(d,g)),e.hide(),b.list[g.sharpId]=$("[data-id='"+g.eleID+"']")});var n=$(document).find(".checkbox-btn");if(b.horizontalPos)switch(b.horizontalPos){case"left":n.css({"float":"left"});break;case"middle":n.css({"float":"none"});break;case"right":n.css({"float":"right"});break;default:n.css({"float":"left"})}return n.on("click keydown",function(a){var b=$(this);"click"===a.type?(a.preventDefault(),j(b)):"keydown"===a.type&&(13===a.keyCode||32===a.keyCode)&&(a.preventDefault(),j(b))}),{change:{ok:function(a){f=a},cancel:function(){}},get:function(a){return void 0===a?b.list:b.list[a]},checkboxChange:function(a,b,c){var d=a.attr("data-id");e[d]={},e[d].ok=b,e[d].cancel=c},setCheckboxVal:k,cancelCheckboxVal:l,toggleCheckboxVal:m}};return{initSelect:function(a){return e(a)},initRadio:function(a){return f(a)},initCheckbox:function(a){return g(a)}}}),define("module/charFormat",[],function(){var a=function(a){var b=/[^\u4E00-\u9FA5\uf900-\ufa2d]/g,c=a.replace(b,"");return c.length},b=function(a){var b=/[^\uFF00-\uFFFF]/g,c=a.replace(b,"");return c.length},c=function(c){var d=a(c),e=b(c),f=c.length-d-e;return 2*d+2*e+f},d=function(a){return parseInt(c(a)/2+.5)},e=function(a){return unescape(encodeURIComponent(a)).length};return{getChineseLen:a,getByteANSILen:c,getCharANSILen:d,getByteUTF8Len:e}}),define("module/textBoxList",["common/util","module/charFormat"],function(a,b){var c=16,d={addNew:"通过服务标签，别人能够更精准地搜索到您！点击此处输入服务标签，并按enter键进行添加",limit:"标签数量已达上限",add:"请添加标签",same:"不能添加相同的标签",singleErr:"单个标签最长为{0}个中文字符或{1}个英文、数字",nullTips:"服务标签不能为空"},e=['<li class="textbox-item" data-value="#{itemText}">',"<span>#{itemText}</span>",'<i title="删除标签"></i>',"</li>"].join(""),f=function(f){var g={target:f.target,data:f.dropDownData,width:f.width||"auto",maxHeight:f.maxHeight||"180"},h=$(g.target),i=h.parent("li"),j=i.parent(".textbox"),k=j.next(".tips");h.attr("maxlength",c);var l=function(b){var c=m(j.find(".textbox-item"));r(),h.focus();for(var f=0;f<c.length;f++)if(b===c[f])return k.html(d.same),!1;var g=$(a.template(e,{itemText:a.safeHTML(b)}));return q()>19?k.html(d.limit).fadeIn(1e3).fadeOut(1e3,function(){k.html("")}):i.before(g),g},m=function(){var a=[];return $(".textbox-item").each(function(b,c){var d=$(c).find("span").text();a.push(d)}),a},n=function(){var a=[];return $(".textbox-item").each(function(b,c){a.push($(c).attr("data-value"))}),a},o=function(){$(".ac ul").empty(),$(".ac").hide()},p=function(){var a=q(),b=!1;return 0===a&&(b=!0),b},q=function(){return j.find(".textbox-item").length},r=function(){k.html("")},s=function(){h.val("")},t=function(){return h.val()},u=function(){var a=$.trim(h.val());if(r(),o(),""!==a){var b=l(a);b&&(b.find("i").on("click",function(a){a.stopPropagation(),$(this).closest(".textbox-item").remove(),p()&&k.html(d.nullTips),q()<20&&0!==q()&&r()}),s())}},v=function(){j.find(".textbox-item").remove()};return $(".textbox-item i").off(),$(".textbox-item i").on("click",function(a){a.stopPropagation(),$(this).closest(".textbox-item").remove(),p()&&k.html(d.nullTips)}),j.on("click",function(a){a.stopPropagation(),h.focus()}),h.AutoComplete({autoSelected:!1,width:g.width,maxHeight:g.maxHeight,data:g.data,onerror:function(b){a.trace(b)},afterSelectedHandler:function(a){var b=a.value,c=l(b);c&&(c.find("i").on("click",function(a){$(this).closest(".textbox-item").remove(),p()&&k.html(d.nullTips),q()<20&&0!==q()&&r(),a.stopPropagation()}),s())}}),h.on("keydown",function(e){var f=$.trim($(this).val()),g=b.getByteANSILen(f);return g>c?void k.html(a.strFormat(d.singleErr,[c/2,c])):(r(),void("keydown"===e.type&&13===e.keyCode&&u()))}),{getItems:m,getItemsVal:n,isEmpty:p,clearInput:s,getInputVal:t,addItem:u,clean:v}};return{initTextBox:f}}),define("module/checkForm",["common/interface","common/util"],function(a,b){var c={required:"必选字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",digits:"只能输入整数",IDCard:"请输入合法的身份证号码",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxLength:"请输入一个 长度最多是 {0} 的字符串",minLength:"请输入一个 长度最少是 {0} 的字符串",rangeLength:"请输入 一个长度介于 {0} 和 {1} 之间的字符串",range:"请输入一个介于 {0} 和 {1} 之间的值",max:"请输入一个最大为{0} 的值",min:"请输入一个最小为{0} 的值"},d=!0,e=function(){var a=this;this.timer=0,this.button,this.btnTimer=function(a,b){var c=a,d=setInterval(function(){1>c?(clearInterval(d),b.css("color","#707070").attr("value","发送验证码").removeAttr("disabled")):(c-=1,b.css("color","#A7A7A7").attr({value:c+"秒后可重试",disabled:"disabled"}))},1e3);this.timer=d},this.stopBtnTimer=function(){clearInterval(this.timer)},this.resetBtn=function(){a.button&&(a.stopBtnTimer(),a.button.css("color","#707070").attr("value","发送验证码").removeAttr("disabled"))},this.startBtnTimer=function(c){var d=c,e=d.resendTime||60,f=d.data||{},g=d.url,h=d.alert,i=d.callback,j=d.button;this.button=j,b.setAjax(g,f,function(b){if(h.close(),b.status){$.alert("发送成功，请尽快填写收到的短信验证码。"),i&&i(b);{a.btnTimer(e,j)}}else $.alert(b.error)},function(){h.close(),$.alert("服务器繁忙，请稍后再试！")})}},f=function(a,b,c,e){var f=b.siblings(".error-tip"),g=b.siblings(".right-tip");a?(f.length<=0&&g.length<=0&&b.parent().append('<span class="error-tip"><em></em></span>'),b.removeClass("tag-error").addClass("tag-right").siblings(".error-tip").attr("class","right-tip"),c&&c.html("&nbsp;"),d=!0):(b.addClass("tag-error"),f.length<=0&&g.length<=0?b.parent().append('<span class="error-tip"><em></em></span>'):g.length>0&&g.attr("class","error-tip"),c&&c.html(e),d=!1)},g=function(a){var b={match:!0,msg:"正确"},d=new RegExp(/^[0-9a-zA-Z_][_.0-9a-zA-Z-]{0,31}@([0-9a-zA-Z][0-9a-zA-Z-]{0,30}\.){1,4}[a-zA-Z]{2,4}$/);return d.test(a)||(b={match:!1,msg:c.email}),b},h=function(a){var b=/^(1)[0-9]{10}$/;return{match:b.test(a),msg:"输入的手机号码有误"}};return $('[data-check="email"]').on("blur keyup",function(){var a=$(this).val(),b=$(this).parent().siblings(".tips");a.length<1?f(!1,$(this),b,"请输入邮箱"):g(a).match?f(!0,$(this),b,""):f(!1,$(this),b,"邮箱格式无效")}),$('[data-check="new-email"]').on("blur keyup",function(){var c=$(this),d=$(this).val(),e=$(this).parent().siblings(".tips");d.length<1?f(!1,c,e,"请输入邮箱"):g(d).match?b.setAjax(a.getApiUrl().checkEmailUrl,{email:d},function(a){a.status?f(!0,c,e,""):f(!1,c,e,"邮箱已被占用")},function(){f(!1,c,e,"验证失败")}):f(!1,c,e,"邮箱格式无效")}),$('[data-check="code"]').on("blur keyup",function(){var a=$(this).val(),b=$(this).parent().siblings(".tips");a.length<1?f(!1,$(this),b,"请输入验证码"):f(!0,$(this),b,"")}),$('[data-check="new-phone"]').on("blur keyup",function(){var c=$(this).val(),d=$(this).parent().siblings(".tips"),e=$(this);c.length<1?f(!1,e,d,"请输入手机号码"):h(c).match?b.setAjax(a.getApiUrl().checkPhoneUrl,{phoneNum:c},function(a){a.status&&!a.exists?f(!0,e,d,""):a.status&&a.exists?f(!1,e,d,"手机号已被使用"):f(!1,e,d,"验证失败")},function(){f(!1,e,d,"验证失败")}):f(!1,e,d,"输入的手机号码有误")}),$('[data-check="phone"]').on("blur keyup",function(){var a=$(this).val(),b=$(this).parent().siblings(".tips"),c=$(this);a.length<1?f(!1,c,b,"请输入手机号码"):11===$.trim(a).length?f(!0,c,b,""):f(!1,c,b,"输入的手机号码有误")}),{init:function(a,b){var c=this;c.$elem=$(a);var e=c.$elem.find('button[type="text"],input[type="text"],input[type="password"],textarea'),f=$(".error-msg");e.each(function(a,b){{var d=$(b).attr("data-validate");$(b).attr("data-rule")}d&&$(b).on("blur keyup",function(){c.checkData($(this),f)})}),c.$elem.on("submit",function(){return e.blur(),a.indexOf("reg")>-1||a.indexOf("login")>-1&&$(a).find(".error-tip").length>1&&$(".error-msg").html("请输入用户名和密码"),d?void(b&&b()):!1})},emailTips:function(a,b){var c=$(a),d=["qq.com","163.com","yahoo.com","yahoo.cn","126.com","sina.com","sohu.com","gmail.com","hotmail.com","foxmail.com"];c.on("keyup",function(){var a=$(this).val(),e=[],f=null;$.each(d,function(b,c){var d="";d=a.indexOf("@")<=-1?a+"@"+c:a.substring(0,a.indexOf("@"))+"@"+c,f!=d&&(f=d,e.push(d))}),c.AutoComplete({follow:!0,width:"auto",maxHeight:"160",afterSelectedHandler:function(){b&&b()},data:e})})},checkData:function(a,b){var c=this,d=a.attr("data-validate"),e=a.attr("data-err"),f=a.attr("data-rule"),g=c[d](a.val(),f);c.changeClass(g.match,a,b,e)},GetPhoneCode:e,changeClass:f,unique:function(){},required:function(a){var b={match:!0,msg:"正确"};return(!a||a.length<1)&&(b={match:!1,msg:c.required}),b},email:g,url:function(a){var b=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,c=new RegExp(b);return c.test(a)},date:function(){try{}catch(a){}},digits:function(a){var b={match:!0,msg:"正确"};return a.match(/^-?\d+$/)||(b={match:!1,msg:c.digits}),b},IDCard:function(a){var b={match:!0,msg:"正确"};return a.match(/^\d{15}|\d{}18$/)||(b={match:!1,msg:c.IDCard}),b},equalTo:function(a,b){var d={match:!0,msg:"正确"};return a!==b&&(d={match:!1,msg:c.equalTo}),d},accept:function(){},maxLength:function(){},minLength:function(){},rangeLength:function(a,d){var e={match:!0,msg:"正确"},f=d.split(",");return(a.length<f[0]||a.length>f[1])&&(e={match:!1,msg:b.strFormat(c.rangeLength,d)}),e},isMobile:h,isUserName:function(a){var b=/^.{1,16}$/;return b.test(a)},isDecimal:function(a){var b=/^[0-9]+.[0-9]+$/;return b.test(a)},isPositiveInt:function(a){var b=/^[0-9]+$/;return b.test(a)},isDecimalAndPositiveInt:function(a){var b=/^[0-9]+(\.[0-9]+)?$/;return b.test(a)},isLimitInt:function(a,b){var c=this;return(a+"").length<=b?c.isPositiveInt(a):!1},range:function(){},max:function(){},min:function(){}}}),define("module/collapsePanel",["common/util"],function(a){return{initCollapse:function(b){var c=function(a){var b=a,c=b.find(".collapse-show-btn"),d=b.find(".collapse-close-btn"),e=b.find(".collapse-pannel"),f=b.find(".collapse-btn-box"),g=b.closest(".collapse-box"),h=g.find(".out");h.length>3&&c.hide(),c.on("click",function(){e.slideDown(200),f.slideUp(200)}),d.on("click",function(){e.slideUp(200),f.slideDown(200)})},d=function(a){var b=$(a);b.length>0&&$.each(b,function(){c($(this))})};if("string"==typeof b)return void d(b);if(a.isArray(b))for(var e=b.length-1;e>=0;e--)d(b[e]);else;},showPannel:function(a){var b=a,c=b.find(".collapse-pannel"),d=b.find(".collapse-btn-box");c.is(":hidden")&&(c.slideDown(200),d.slideUp(200))},hidePannel:function(a){var b=a,c=b.find(".collapse-pannel"),d=b.find(".collapse-btn-box");c.is(":hidden")||(c.slideUp(200),d.slideDown(200))}}}),define("module/userDetail",["common/util","module/checkForm","module/prettifyForm","module/collapsePanel","module/charFormat"],function(a,b,c,d,e){var f=function(){var a=$(".txt-verify");a.each(function(a,b){$(b).parent().hasClass("tag-container")||$(b).wrap("<div class='tag-container'></div>")})},g=function(a){var d=a.year,e=a.yearEnd,f=a.month,g=a.monthEnd,h=(new Date).getFullYear(),i=(new Date).getMonth(),j=a.clear||!1,k=d.next(".select"),l=e.next(".select"),m=f?f.next(".select"):null,n=g?g.next(".select"):null,o=a.tips,p=a.err,q=a.timeNow,r=c.initSelect({target:a.editSelect}),s=a.editModule,t=s?s.find(".work-today"):null;j&&(r.setSelectVal(m,1),r.setSelectVal(k,h),r.setSelectVal(n,1),r.setSelectVal(l,h),k.scrollTop(0),l.scrollTop(0),b.changeClass(!0,e,o,""));var u=function(a,b){if(b&&b.length){var c=b.prev("select");a&&parseInt(a)==h?(b.find("li").eq(i).nextAll().css({display:"none"}),c.val()>i+1&&r.setSelectVal(b,1)):b.find("li").css({display:""})}},v=function(){var a=$.trim(d.val()),c=$.trim(e.val()),h=$.trim(f?f.val():"01"),i=$.trim(g?g.val():"01"),j=new Date,k=j.getFullYear().toString(),l=(j.getMonth()+1).toString();"至今"===c&&(c=k,i=l,isToday=!0);var m=new Date(a+"/"+h+"/01"),n=new Date(c+"/"+i+"/01"),r=new Date;return n>r?void b.changeClass(!1,e,o,q):m>n?void b.changeClass(!1,e,o,p):void b.changeClass(!0,e,o,"")};u(d.val(),m),u(e.val(),n),r.selectChange(k,function(){u(d.val(),m),v()}),"至今"===$.trim(e.val())?t.addClass("hide"):t&&t.removeClass("hide"),r.selectChange(l,function(a){u(e.val(),n),"至今"===a.selectedText?t.addClass("hide"):t&&t.removeClass("hide"),v()}),m&&r.selectChange(m,function(){v()}),n&&r.selectChange(n,function(){v()})},h=function(a){for(var c=0;c<a.length;c++)(function(c){var d=a[c].target,f=a[c].maxLen||20,g=a[c].outTips||"",h=a[c].nullTips||"",i=a[c].required||!1;$(d).attr("maxlength",2*f);var j=$(d),k=$.trim(j.val())||"",l=j.parent().siblings(".tips"),m=""===h,n=e.getCharANSILen(k),o=f-n;k.length<1&&!i?b.changeClass(m,j,l,h):0>o?b.changeClass(!1,j,l,g):b.changeClass(!0,j,l,"")})(c)},i=function(a){var b=$(".save-ok");a=a||"保存成功",b.find("span").text(a),b.removeClass("none"),setTimeout(function(){b.addClass("none")},2e3),$(".collapse-show-btn").on("click",function(){b.addClass("none")})},j=function(a){for(var b=a&&$(a).length?$(a).hasClass("select-year")?$(a):$(a).find(".select-year"):$(".select-year"),c=new Date,d=parseInt(c.getFullYear()),e=1950,f="",g=d;g>=e;g--)f+=g!==d?"<option value='"+g+"'>"+g+"</option>":"<option value='"+g+"' selected>"+g+"</option>";b.each(function(a,b){(1===$(b).find("option").length||$(b).find("option").length<1)&&$(b).append(f)})},k=function(a){for(var b=a&&$(a).length?$(a).hasClass("select-month")?$(a):$(a).find(".select-month"):$(".select-month"),c=12,d="",e=1;c>=e;e++)d+="<option value='"+e+"'>"+e+"</option>";b.each(function(a,b){$(b).find("option").length<1&&$(b).append(d)})},l=function(){var a=function(){var a=!1;return $(".collapse-pannel").each(function(b,c){return $(c).is(":hidden")?void 0:(a=!0,!1)}),a?"你的数据还没有保存":void 0};$.browser.msie?window.document.body.onbeforeunload=a:(window.onBeforeUnload=a,$("body").attr("onbeforeunload","return onBeforeUnload();"))},m=function(){var a=$(".user-exp").find(".user-exp-index span");a.each(function(a,b){var c=a+1;$(b).text(c)})},n=function(){var a=$(".icon-add-info");a.on("click",function(){var a=$(".user-exp");a.each(function(a,b){d.hidePannel($(b))})})},o=function(a,b){var c=function(a){if(a){var b=a.replace(/至今/,"2999,12").replace(/\s/,"").replace(/[年月]/g,",").replace(/,{2,}/g,",").replace(/\b(\d{1})\b/g,"0$1"),c=b.substring(0,7),d="";return b.length>8?(d=b.substring(8,15),d>c?d+","+c:c+","+d):c}};a=a||[];var d=a.length;b=c(b);for(var e=0;d>e;e++)a[e]=c(a[e]);for(var e=0;d>e;e++)if(a[e]<=b){d=e;break}return d},p=function(a){return $.trim(a.find(".tips:not(.introduction-tips)").text()).length>0?($.alert("您所填写的内容不正确。"),!0):!1},q=function(a,c){$.each(a,function(a,c){var d=$(c),e=d.parent().siblings(".tips");b.changeClass(!0,d,e,""),d.parent().find(".right-tip").remove(),d.val("")}),c&&d.hidePannel(c)},r=function(a){$.isArray(a)||(a=[a]),$.each(a,function(a,c){var d=c,e=d.parent().siblings(".tips");b.changeClass(!0,d,e,""),d.parent().find(".right-tip").remove()})},s=function(a){var b=a;b.off("blur keyup"),b.on("blur keyup",function(){var a=$(this),b=a.val(),c=b.length,d=500,f=a.siblings(".tips"),g=f.hasClass("introduction-tips"),h=(e.getCharANSILen(b),d-c),i=c-d;d>=c&&0!==c?(g||f.addClass("introduction-tips"),f.html("最多输入"+d+'个字符，还可以输入<span class="num">'+h+"</span>字符")):c>d?(g&&f.removeClass("introduction-tips"),f.html("最多输入"+d+'个字符，现已经超过<span class="num">'+i+"</span>字符")):f.html("")})};return{verifyInput:h,closeTab:l,showSaveSuccess:i,initYearSelect:j,initMonthSelect:k,openAddPanel:n,refreshIndex:m,getIndex:o,initVerify:f,checkEditErr:p,resetItem:q,clearInputState:r,checkDateAll:g,initIntroduction:s}}),define("module/enResume",["common/util","common/interface","module/prettifyForm"],function(a,b,c){var d=$("#isForbidAddResumeTask").val(),e=['<div class="fr en-resume-box">','<div class="btn-default btn-xs btn-green btn-en-resume" >','<span class="icon icon-pen-white fl"></span><span class="fl">发布简历到海外</span>',"</div>","</div>"].join(""),f=['<div class="fr en-resume-box">','<div class="btn-default btn-xs btn-white" >','<span class="fl">海外简历翻译中...</span>',"</div>","</div>"].join("");return{init:function(g){var h=$(e);d="true"==d||"1"==d,d?(h=$(f),h.on("click",function(){$.alert(["<h4>您已授权嗨啰翻译中心填写英文海外简历，预计<br>1-3个工作日内完成。</h4>",'<div class="f14 pt20">',"发布海外简历：个人简历将发布到helome国际<br>版，方便国外用户找到您。",'<a href="/questions#question_translate" target="_blank" title="查看帮助"><i class="icon icon-tips pr" title=""></i></a>',"</div>"].join(""))})):h.on("click",function(){var d=$.dialog({id:"resume",fixed:!0,lock:!0,content:['<div class="dialog-panel">','<div class="dialog-tit">','<div class="span-left">发布简历到海外</div>',"</div>",'<table class="dialog-table">',"<tr>",'<td class="f14">',"发布海外简历：个人简历将发布到helome国际版，方便<br>国外用户找到您。",'<a href="/questions#question_translate" target="_blank" title="查看帮助"><i class="icon icon-tips pr" title=""></i></a>',"</td>","</tr>","<tr>",'<td class="pt20"><h4>请选择翻译语言(暂时只开放英文)</h4></td>',"</tr>","<tr>",'<td class="resume-content pt20 pb20">','<div style="overflow: hidden"><label value="1"><input checked="checked" type="checkbox"><span>英文</span></label></div>','<div class="en-resume-error none mt10">请选择语言</div></td>',"</tr>","<tr>",'<td><p>有什么特殊要求留给翻译中心</p><textarea id="remark" class="textarea w350 mt10 mb10" maxlength="60"></textarea>','<div class="tips">内容限制60个字符，还可以输入<b>60</b>个字符</div></td></tr>',"</table>","</div>"].join(""),okValue:"授权嗨啰翻译中心",ok:function(){var c=$("#remark").val(),e=$(".resume-content input[type=checkbox]"),g=[];
if(e.each(function(a,b){$(b).prop("checked")&&g.push($(b).parent("label").attr("value"))}),0==g.length)$(".en-resume-error").removeClass("none");else{var i=$.tips("loading");a.setAjax(b.getApiUrl().addEnResume,{remark:c},function(a){i.close(),1==a.status?(d.close(),$.alert("<h4>已授权嗨啰翻译中心为您填写英文海外简历，</h4><h4>预计1-3个工作日内完成。</h4>"),f=$(f),h.replaceWith(f),f.on("click",function(){$.alert("<h4>您已授权嗨啰翻译中心填写英文海外简历，<br>预计1-3个工作日内完成。</h4>")})):$.alert("<h4>发布失败！请联系客服，或稍后重试!</h4>")},function(){i.close(),$.alert("<h4>发布失败！请联系客服，或稍后重试!</h4>")},"GET")}return!1},cancelValue:"取消",cancel:!0,initialize:function(){a.wordsCount("#remark",".dialog-table .tips b",60),$(".d-buttons .btn-default").css({width:"145px",padding:"8px 0px"});var b=c.initCheckbox({target:$(".dialog-panel")}),d=b.get();$.each(d,function(a,b){$(b).on("click",function(){$(".en-resume-error").addClass("none")})})}})}),$(g).append(h)}}}),require(["common/interface","common/util","module/pageCommon","module/prettifyForm","module/textBoxList","module/charFormat","module/userDetail","module/enResume"],function(a,b,c,d,e,f,g,h){var i,j,k={},l=($("#userId"),$("#userName")),m=$("#userIntroduction"),n=$("#userJob"),o=$("#userTimeZome"),p=$("#userCountry"),q=p.find(".user-country"),r=$("[name=userIndustry]"),s=function(){return $.trim(l.val())},t=function(){return b.getByName("sex").val()},u=function(){return q.text()},v=function(){return o.val()},w=function(){return $.trim(n.val())},x=function(){return m.val().replace(/\n+?(?=\n)/gm,"")},y=function(){var a={};return a.userName=s(),a.gender=t(),a.country=u(),a.timeZone=v(),a.job=w(),a.introduction=x(),a.industry=j.getIndustry(),a.tags=i.getItemsVal(),a},z=function(){g.initVerify(),c.initLogin(),h.init($(".user-info .tab-menu")),i=e.initTextBox({target:"#tags-input",dropDownData:a.getApiUrl().getTagsUrl,width:"auto",maxHeight:"189"}),E();var b=(d.initSelect(),d.initRadio(),d.initCheckbox());B(),D(),j=A(b),k=y(),$(".btn-user-info-save").on("click",function(){C()}),l.on("blur",function(){g.verifyInput([{target:l,maxLen:16,outTips:"姓名最长16个中文字符或32个英文、数字",nullTips:"姓名不能为空"}])}),n.on("blur",function(){g.verifyInput([{target:n,maxLen:16,outTips:"最长填写16个中文字符或32个英文、数字"}])})},A=function(a){var b=$(".industry-checkbox"),c=b.find(".checkbox-btn"),d=null;return c.each(function(){var b=$(this);a.checkboxChange(b,function(){d=c.find(".checkbox.checked").length,3>d?c.removeClass("disabled"):c.find(".checkbox:not(.checked)").parents(".checkbox-btn").addClass("disabled")},function(){d=c.find(".checkbox.checked").length,3===d?c.find(".checkbox:not(.checked)").parents(".checkbox-btn").addClass("disabled"):c.removeClass("disabled")})}),$(function(){c.find(".checkbox.checked").length>=3&&c.find(".checkbox:not(.checked)").parents(".checkbox-btn").addClass("disabled")}),{getIndustry:function(){var a=[];return r.filter(":checked").each(function(b,c){a.push($(c).val())}),a}}},B=function(){function a(a){var b=a.find(".filter-name-area");b.removeClass("on"),f.addClass("none")}function c(b){var c=b.find(".filter-name-area");c.addClass("on"),f.removeClass("none"),f.find('.continent-country:not(".none") a:first').focus(),$(document).on("click",function(c){var d=$(c.target);d.prop("class").indexOf("filter-name")<0&&d.closest("#userCountry").length<1&&a(b),c.stopPropagation()})}var d,e,f=$(".continent"),g=(location.pathname+"?",q.text()),h=[],i='<span><a title="#{countryNameFull}"#{cls}>#{countryName}</a></span>',j=['<span class="continent-country #{isHide}" data-continent="#{continentName}">',"#{countryList}","</span>"].join(""),k=function(a){var c=[];return $.each(a,function(a,d){"全部"!=d&&c.push(b.template(i,{countryName:d.length>5?d.substring(0,5)+"..":d,countryNameFull:d,cls:d==g?' class="current"':""}))}),c.join("")};$.each(country,function(a,c){d=c.continent,e=c.country,h.push(b.template(j,{continentName:d,isHide:0==a?"":"none",countryList:k(e)}))}),$(".continent-country").remove(),f.append(h.join("")),$(".continent-name").on("mouseover",function(){var a=$(this),b=a.siblings(".continent-name"),c=a.attr("data-continent"),d=$('.continent-country[data-continent="'+c+'"]');b.removeClass("current"),a.addClass("current"),d.removeClass("none"),d.siblings(".continent-country").addClass("none")}),$(".filter-name").each(function(b,d){$(d).on("click",function(b){$(this).find(".filter-name-area").prop("class").indexOf("on")>-1?a($(this)):c($(this)),b.stopPropagation(),b.preventDefault()}).on("keydown",function(b){13==b.keyCode&&($(this).find(".filter-name-area").prop("class").indexOf("on")>-1?a($(this)):c($(this)),b.stopPropagation(),b.preventDefault())})}),$(".continent-country span a").on("click",function(b){var c=$(this);a(c.closest("#userCountry")),f.find(".continent-country a").removeClass("current"),c.addClass("current"),q.text(c.prop("title")||c.text()),b.stopPropagation(),b.preventDefault()})},C=function(c){var d=l.val(),e=$('input[name="cost"]:checked').val();if(g.verifyInput([{target:l,maxLen:16,outTips:"姓名最长16个中文字符或32个英文、数字",nullTips:"姓名不能为空"},{target:n,maxLen:16,outTips:"最长填写16个中文字符或32个英文、数字"}]),!$.trim(d).length)return l.val(""),void l.focus().blur();i.addItem();var f=$("#skillTags");if(0===f.find(".textbox-item").length)return void f.siblings(".tips").text("服务标签不能为空");if($.trim($(".tips").not(".introduction-tips").text()).length>0)return void $.alert("您所填写的内容不正确。");var h={name:s(),gender:t(),country:u(),timeZone:v(),job:w(),personalInfo:x(),industryIds:j.getIndustry(),skillsTags:i.getItemsVal(),payType:"-1"==e?"1":"0",expenses:"-1"==e?"0":e},m=$.tips("loading");b.setAjax(a.getApiUrl().saveUserInfoUrl,h,function(a){m.close(),a.status?($("#user-name, .header-user-name, #J-base-top-name").text(h.name),c&&c(),g.showSaveSuccess(),k=y()):($.alert(a.error),$(".save-ok").addClass("none"))},function(){m.close(),$.alert("服务器繁忙，请稍后再试！")})},D=function(){var a=m;a.on("blur keyup",function(){var b=a.val(),c=b.length,d=500,e=a.siblings(".tips"),g=e.hasClass("introduction-tips"),h=(f.getCharANSILen(b),d-c),i=c-d;d>=c&&0!==c?(g||e.addClass("introduction-tips"),e.html("最多"+d+'字符，还可以输入<span class="num">'+h+"</span>字符")):c>d?(g&&e.removeClass("introduction-tips"),e.html("最多"+d+'字符，现已经超过<span class="num">'+i+"</span>字符")):e.html("")})},E=function(){var a=o,b=(new Date).getTimezoneOffset(),c=$("#userTimeZome");if(!a.attr("data-value")){var d=a.find('option[offset="'+-b+'"]').eq(0).prop("value");a.val(d),k.timeZone=d}c.text().length<1&&c.text(a.find("option:selected").text())};z(),b.onBeforeBomUnload(function(){var a=y();return $.param(a)!=$.param(k)?"您的个人信息有修改还未保存。":void 0}),$(".cost-detail").poshytip({content:'按照咨询时长计费。 <a href="/questions#question_trade" class="tips-link" target="_blank">查看详细规则</a>',alignTo:"target",alignX:"center",showAniDuration:0,offsetY:7}),$(".cost-discuss").poshytip({content:'面议：类似按次付费，具体价格由双方协商决定。 <a href="/questions#question_trade" class="tips-link" target="_blank">查看详细规则</a>',alignTo:"target",alignX:"center",showAniDuration:0,offsetY:7})}),define("page/page_userBaseInfo",function(){});